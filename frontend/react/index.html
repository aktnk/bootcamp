<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React でシングルページアプリケーションを書こう | IIJ Bootcamp</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="React でシングルページアプリケーションを書こう">
    
    <link rel="preload" href="/bootcamp/assets/css/0.styles.9db5c86c.css" as="style"><link rel="preload" href="/bootcamp/assets/js/app.3ff76bba.js" as="script"><link rel="preload" href="/bootcamp/assets/js/2.f4976132.js" as="script"><link rel="preload" href="/bootcamp/assets/js/8.abec832f.js" as="script"><link rel="preload" href="/bootcamp/assets/js/11.f7af7a70.js" as="script"><link rel="preload" href="/bootcamp/assets/js/10.5e2035fa.js" as="script"><link rel="prefetch" href="/bootcamp/assets/js/12.13ff0b0c.js"><link rel="prefetch" href="/bootcamp/assets/js/13.8176222b.js"><link rel="prefetch" href="/bootcamp/assets/js/14.c28de7bb.js"><link rel="prefetch" href="/bootcamp/assets/js/15.2777bc3d.js"><link rel="prefetch" href="/bootcamp/assets/js/16.a14c0c23.js"><link rel="prefetch" href="/bootcamp/assets/js/17.12e67591.js"><link rel="prefetch" href="/bootcamp/assets/js/18.10c6179e.js"><link rel="prefetch" href="/bootcamp/assets/js/19.d657f1e5.js"><link rel="prefetch" href="/bootcamp/assets/js/20.62f8dac0.js"><link rel="prefetch" href="/bootcamp/assets/js/21.8b6449cf.js"><link rel="prefetch" href="/bootcamp/assets/js/22.7efa430e.js"><link rel="prefetch" href="/bootcamp/assets/js/23.4f365ecb.js"><link rel="prefetch" href="/bootcamp/assets/js/24.230310f0.js"><link rel="prefetch" href="/bootcamp/assets/js/25.aca0597b.js"><link rel="prefetch" href="/bootcamp/assets/js/26.ead48603.js"><link rel="prefetch" href="/bootcamp/assets/js/27.5c05414e.js"><link rel="prefetch" href="/bootcamp/assets/js/28.de8fb29c.js"><link rel="prefetch" href="/bootcamp/assets/js/29.94bbd58d.js"><link rel="prefetch" href="/bootcamp/assets/js/3.701be469.js"><link rel="prefetch" href="/bootcamp/assets/js/30.eed90d42.js"><link rel="prefetch" href="/bootcamp/assets/js/31.ce2deb70.js"><link rel="prefetch" href="/bootcamp/assets/js/32.ceffd307.js"><link rel="prefetch" href="/bootcamp/assets/js/33.d2f485ec.js"><link rel="prefetch" href="/bootcamp/assets/js/34.bd262d5c.js"><link rel="prefetch" href="/bootcamp/assets/js/35.8856578c.js"><link rel="prefetch" href="/bootcamp/assets/js/36.4ccd3b64.js"><link rel="prefetch" href="/bootcamp/assets/js/37.244b5a64.js"><link rel="prefetch" href="/bootcamp/assets/js/38.1079f329.js"><link rel="prefetch" href="/bootcamp/assets/js/39.3b018c73.js"><link rel="prefetch" href="/bootcamp/assets/js/4.50053d4e.js"><link rel="prefetch" href="/bootcamp/assets/js/40.b662a336.js"><link rel="prefetch" href="/bootcamp/assets/js/41.47d29a55.js"><link rel="prefetch" href="/bootcamp/assets/js/42.76cee7fb.js"><link rel="prefetch" href="/bootcamp/assets/js/43.5417df99.js"><link rel="prefetch" href="/bootcamp/assets/js/44.25a8b523.js"><link rel="prefetch" href="/bootcamp/assets/js/45.e2d1865b.js"><link rel="prefetch" href="/bootcamp/assets/js/46.6673a313.js"><link rel="prefetch" href="/bootcamp/assets/js/47.11117eaa.js"><link rel="prefetch" href="/bootcamp/assets/js/48.d315d7a0.js"><link rel="prefetch" href="/bootcamp/assets/js/5.d0ed098b.js"><link rel="prefetch" href="/bootcamp/assets/js/6.0ffa2376.js"><link rel="prefetch" href="/bootcamp/assets/js/7.73972039.js"><link rel="prefetch" href="/bootcamp/assets/js/9.65321ed0.js">
    <link rel="stylesheet" href="/bootcamp/assets/css/0.styles.9db5c86c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bootcamp/" class="home-link router-link-active"><!----> <span class="site-name">IIJ Bootcamp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React でシングルページアプリケーションを書こう</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bootcamp/frontend/react/#始めに" class="sidebar-link">始めに</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/frontend/react/#推奨環境" class="sidebar-link">推奨環境</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#docker-docker-compose" class="sidebar-link">Docker / docker-compose</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#visual-studio-code" class="sidebar-link">Visual Studio Code</a></li></ul></li><li><a href="/bootcamp/frontend/react/#react-とは" class="sidebar-link">React とは</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/frontend/react/#hello-world" class="sidebar-link">Hello World</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#初回起動" class="sidebar-link">初回起動</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#hello-world-2" class="sidebar-link">Hello World</a></li></ul></li><li><a href="/bootcamp/frontend/react/#コンポーネントを作成してみる" class="sidebar-link">コンポーネントを作成してみる</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#小さなコンポーネントを作成してみましょう" class="sidebar-link">小さなコンポーネントを作成してみましょう</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#クラスベースコンポーネント" class="sidebar-link">クラスベースコンポーネント</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#app-js-をクラスベースコンポーネントに置き換えてみよう" class="sidebar-link">App.js をクラスベースコンポーネントに置き換えてみよう</a></li></ul></li><li><a href="/bootcamp/frontend/react/#component-組込みの機能" class="sidebar-link">Component 組込みの機能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#小要素へのデータの共有-props" class="sidebar-link">小要素へのデータの共有 : Props</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#component内部で保持するデータストア-state" class="sidebar-link">Component内部で保持するデータストア : State</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#api-サーバからデータを取得してみる" class="sidebar-link">API サーバからデータを取得してみる</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#axios-を使ってみよう" class="sidebar-link">axios を使ってみよう</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#コンポーネントのライフサイクル-lifecycle" class="sidebar-link">コンポーネントのライフサイクル: LifeCycle</a></li></ul></li><li><a href="/bootcamp/frontend/react/#自分の手でフロントエンドを作成してみましょう" class="sidebar-link">自分の手でフロントエンドを作成してみましょう</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/frontend/react/#最後に" class="sidebar-link">最後に</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/frontend/react/#読み物" class="sidebar-link">読み物</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#spa-はどこへ" class="sidebar-link">SPA はどこへ？</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#jsx-javascript-経験者向け" class="sidebar-link">JSX(JavaScript 経験者向け)</a></li><li class="sidebar-sub-header"><a href="/bootcamp/frontend/react/#pwa-pwa-を知っている人向け" class="sidebar-link">PWA(PWA を知っている人向け)</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><table><tr><td>このハンズオンでやること</td><td>React でシングルページアプリケーションを書こう</td></tr> <tr><td>想定時間</td><td>2h</td></tr> <tr><td>前提知識・用語</td><td>特になし</td></tr></table> <p>IIJ Bootcamp React に関する資料です。あらかじめ Bootcamp のリポジトリをローカルへ clone し、下記のコマンドを叩いて準備まで終わらせておいてください。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">git</span> clone https://github.com/iij/bootcamp.git
<span class="token builtin class-name">cd</span> bootcamp/src/frontend/react
docker-compose up -d
</code></pre></div><h1 id="page-frontmatter-title"><a href="#page-frontmatter-title" class="header-anchor">#</a> React でシングルページアプリケーションを書こう</h1> <h2 id="始めに"><a href="#始めに" class="header-anchor">#</a> 始めに</h2> <p>この Bootcamp では React の動作原理を学びながら簡単なシングルページアプリケーションの作成を行います。
フロントエンド開発とはどのようなものか、経験して今後のエンジニア人生の糧になれば良いと思います。</p> <p>この Bootcamp を通して、具体的に下記を達成できるようになることを期待しています。</p> <ul><li>フロントエンド開発を経験する</li> <li>コンポーネントベース開発を経験する</li> <li>React 開発の流れを理解する</li> <li>API サーバとフロントエンドアプリケーションの間で通信を行う経験する</li></ul> <p>一方、下記の内容についてはこの Bootcamp で解説しません。</p> <ul><li>仮想 DOM、React の動作原理</li> <li>Jest などのユニットテストツール</li> <li>Redux などの状態管理ツール</li></ul> <h2 id="推奨環境"><a href="#推奨環境" class="header-anchor">#</a> 推奨環境</h2> <p>Bootcamp を実施するうえで、下記の環境を推奨とします。</p> <h3 id="docker-docker-compose"><a href="#docker-docker-compose" class="header-anchor">#</a> Docker / docker-compose</h3> <p>IIJ Bootcamp 全体を通して必要となるコンテナを動かすためのミドルウェア。</p> <h3 id="visual-studio-code"><a href="#visual-studio-code" class="header-anchor">#</a> Visual Studio Code</h3> <p>React を含め、いまやフロントエンド開発を進めるうえで IDE は必須です。筆者は Microsoft 社の Visual Studio Code を推奨しています。</p> <h4 id="拡張機能-remote-development"><a href="#拡張機能-remote-development" class="header-anchor">#</a> 拡張機能 Remote Development</h4> <p>Visual Studio Code と Docker の組み合わせで開発をする場合、Remote Development の拡張機能をインストールすることをお勧めします。この拡張機能を利用することで、コンテナ内部で Visual Studio Code を開くことができます。</p> <h2 id="react-とは"><a href="#react-とは" class="header-anchor">#</a> React とは</h2> <p>React は、もともと Facebook 社が開発している Web ユーザーインタフェースのためのフレームワークです。しかし今では Web のインタフェース のみならず Native アプリケーションへのコンパイルなど幅広く活躍が期待されているフレームワークです。</p> <p>React を用いることで、コードが煩雑になりがちでメンテナンスが難しくなるフロントエンドの開発をスマートにできました。</p> <div class="custom-block tip"><p class="custom-block-title">Create React App</p> <p>React を始めるための方法としては、いくつかの方法があります。</p> <ul><li>React の基礎を体験したい = オンラインサービスを使う
<ul><li><a href="https://reactjs.org/redirect-to-codepen/hello-world" target="_blank" rel="noopener noreferrer">CodePen<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://codesandbox.io/s/new" target="_blank" rel="noopener noreferrer">CodeSandbox<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://glitch.com/edit/#!/remix/starter-react-template" target="_blank" rel="noopener noreferrer">Glitch<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>既存の HTML ページの中に React 埋め込みたい = 下記のチュートリアル
<ul><li><a href="https://reactjs.org/docs/add-react-to-a-website.html" target="_blank" rel="noopener noreferrer">Add React to a WebSite<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>フルに React を使ってアプリケーションを作りたい = Create ReactApp
<ul><li><a href="https://facebook.github.io/create-react-app/docs/getting-started" target="_blank" rel="noopener noreferrer">Create React App<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul> <p>このハンズオンでは、最初から React を使うことを想定して CreateReactApp を使ったプロジェクトひな型を作成しています。</p></div> <h2 id="hello-world"><a href="#hello-world" class="header-anchor">#</a> Hello World</h2> <h3 id="初回起動"><a href="#初回起動" class="header-anchor">#</a> 初回起動</h3> <p><code>docker-compose up</code>で起動した<code>bootcamp-react</code>コンテナ内部にアクセスし、下記のコマンドをたたきましょう。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 下記のいずれかでシェルを取得する</span>
<span class="token comment"># docker-composeでbash取得</span>
docker-compose <span class="token builtin class-name">exec</span> bootcamp-react <span class="token function">bash</span>
<span class="token comment"># dockeコマンドでbash取得</span>
docker <span class="token builtin class-name">exec</span> -it bootcamp-react <span class="token function">bash</span>
<span class="token comment"># VSCode Remote Developmentでbootcamp-react:/appを開く</span>

<span class="token builtin class-name">cd</span> /app
<span class="token function">npm</span> start
</code></pre></div><p>下記の文言が出力されたら React の開発サーバが 3000 番ポートで起動しています。</p> <pre>Compiled successfully!

You can now view app in the browser.

  Local:            http://localhost:3000
  On Your Network:  http://XXX.XXX.XXX.XXX:3000

Note that the development build is not optimized.
To create a production build, use yarn build.
</pre> <p>localhost:3000 にブラウザでアクセスすると下記のようなページが表示されることを確認してください。</p> <p><img src="/bootcamp/assets/img/image1.11489be8.png" alt="画面1"></p> <p>チェックポイント(1/2)</p> <ul><li><code>npm start</code>で React の開発サーバを起動した</li> <li>React の初期ページを確認した</li></ul> <h3 id="hello-world-2"><a href="#hello-world-2" class="header-anchor">#</a> Hello World</h3> <p>React の開発サーバは、ソースコードの変更を検知してその変更をブラウザに伝えてくれます。
さっそくひとつやってみましょう。</p> <p>これから先、ファイルを何度か編集することになるのでcliでBootcampを進める人は別のシェルを取得しておいてください。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># シェル上でBootcampを進める人向け</span>
docker-compose <span class="token builtin class-name">exec</span> bootcamp-react <span class="token function">bash</span>
</code></pre></div><p>src/App.js を開き下記の通りに編集してみましょう。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Hello World<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>するとブラウザが自動的にリロードされ、下記のような画面に変わります。</p> <p>※ 環境にとっては自動リロードしてくれない場合もあります。そのときはリロード(F5)をしてみてください。</p> <p><img src="/bootcamp/assets/img/image2.95e6af6b.png" alt="画面2"></p> <p>チェックポイント(2/2)</p> <ul><li>React で Hello World を実施した</li></ul> <h2 id="コンポーネントを作成してみる"><a href="#コンポーネントを作成してみる" class="header-anchor">#</a> コンポーネントを作成してみる</h2> <p>React は UI の部品を Component という単位に分割することで、ロジックやスタイルなどの再利用性を高めて実装を行います。</p> <div class="custom-block tip"><p class="custom-block-title">なぜ Component を使うのか</p> <p>React ではなく Vue ですが、こちらの記事が非常にわかりやすい例です。Vue と React ともにコンポーネントベースのフレームワークですので、根幹は一緒です。</p> <p>気になる人は読んでみてください。</p> <p><a href="https://qiita.com/Yametaro/items/e8cb39b1a20b762bfafa" target="_blank" rel="noopener noreferrer">ワイ「何でそんな小っさいコンポーネント作ってるん？ｗ」 | Qiita<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h3 id="小さなコンポーネントを作成してみましょう"><a href="#小さなコンポーネントを作成してみましょう" class="header-anchor">#</a> 小さなコンポーネントを作成してみましょう</h3> <p>小さな Component を作ってみましょう。Component を記述する方法はいくつかありますが、まずクラスベースのコンポーネントを作成してみます。</p> <p>以下のソースコードを src/Note.js として作成してください。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Note</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Component<span class="token operator">!</span> Component<span class="token operator">!</span><span class="token operator">!</span> Component<span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>さらに src/App.js が Note.js を使うように修正します。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Note <span class="token keyword">from</span> <span class="token string">&quot;./Note&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Note <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Note <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>さあ、<a href="localhost:3000">localhost:3000</a>にアクセスするとブラウザに表示されている内容が変化したと思います。</p> <p><img src="/bootcamp/assets/img/image3.65127309.png" alt="画像3"></p> <p>このように React では Component という UI 部品を組み合わせることでデザイン、UI を作成していきます。</p> <p>チェックポイント(1/2)</p> <ul><li>クラスベースコンポーネントの書き方を学んだ</li> <li>Component の使い方を学んだ</li></ul> <h3 id="クラスベースコンポーネント"><a href="#クラスベースコンポーネント" class="header-anchor">#</a> クラスベースコンポーネント</h3> <p>クラスベースコンポーネントは React の基本的な Component の記述方法です。</p> <p>定義の方法は JavaScript のクラスに対して<code>React.Component</code>を継承させるだけです。
さらに<code>React.Component</code>を継承したクラスが<code>render</code>メソッドをオーバーライドすることにより、メソッド内で返却した DOM をブラウザがマウントして描画させることができます。</p> <p>コンポーネントを使う側は export されたコンポーネントを HTML のタグのようにして宣言することでコンポーネントを利用できます。</p> <h3 id="app-js-をクラスベースコンポーネントに置き換えてみよう"><a href="#app-js-をクラスベースコンポーネントに置き換えてみよう" class="header-anchor">#</a> App.js をクラスベースコンポーネントに置き換えてみよう</h3> <p>src/App.js を見てみると、src/Note.js のコンポーネントとは構成が異なります。src/App.js は関数型コンポーネントと呼び、複雑な状態を持たないコンポーネントを作成する際によく用いられます。</p> <p>試しに src/App.js をクラスベースのコンポーネントへ書き直してみましょう。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Note <span class="token keyword">from</span> <span class="token string">&quot;./Note.js&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Note <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Note <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Note <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>チェックポイント(2/2)</p> <ul><li>関数コンポーネントからクラスコンポーネントへ変換した</li></ul> <h2 id="component-組込みの機能"><a href="#component-組込みの機能" class="header-anchor">#</a> Component 組込みの機能</h2> <h3 id="小要素へのデータの共有-props"><a href="#小要素へのデータの共有-props" class="header-anchor">#</a> 小要素へのデータの共有 : Props</h3> <p>Note コンポーネントを作成しましたが、今のままでは&quot;Component! Component!! Component!!!&quot;と叫ぶだけのコンポーネントで再利用性が悪いです。</p> <p>他も文字を叫ぶことができるように、叫ぶ文字を外から渡してあげるることができるようにしましょう。</p> <p>src/Note.js を下記のように修正してみましょう。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Note</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// (3, &quot;Component&quot;) =&gt; &quot;Component! Component!! Component!!!&quot;</span>
  <span class="token function-variable function">constructWord</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> word</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> words <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> counter <span class="token operator">&lt;</span> number<span class="token punctuation">;</span> counter<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      words <span class="token operator">+=</span> word <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> words<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructWord</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>number<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>word<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>そして、src/App.js</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Note <span class="token keyword">from</span> <span class="token string">&quot;./Note&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span><span class="token comment">/* ComponentのPropsにデータを渡すには、DOMにパラメータを直接指定する */</span><span class="token punctuation">}</span>
          <span class="token operator">&lt;</span>Note word<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;Component&quot;</span><span class="token punctuation">}</span> number<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Note word<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;Hoge&quot;</span><span class="token punctuation">}</span> number<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>Note word<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">&quot;Huga&quot;</span><span class="token punctuation">}</span> number<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>ここまで修正すると、下記の通りにブラウザの表示が変わります。</p> <p><img src="/bootcamp/assets/img/image4.40ab6d33.png" alt="画像4"></p> <p>親コンポーネントからデータを注入できるように<code>props</code>を適切に定義することで、Component の再利用性をあげることができます。
注意が必要なこととして<code>props</code>は Readonly なため、<code>props</code>の中身を書き換えたりすることはできません。</p> <p>チェックポイント(1/3)</p> <ul><li>Component の <code>Props</code> について学んだ</li> <li>Component 間のパラメータの受け渡し方を学んだ</li></ul> <h3 id="component内部で保持するデータストア-state"><a href="#component内部で保持するデータストア-state" class="header-anchor">#</a> Component内部で保持するデータストア : State</h3> <p><code>props</code>フィールドを通じてコンポーネント間のデータの受け渡しはできましたが、ユーザーからの入力や外部から取得した情報はどのように保存するべきでしょうか？
Component には State というデータの保存する機構が付属されています。試しに、ユーザーがボタンを押した数だけ叫ぶ回数を増やすように実装してみましょう。</p> <p>src/Note.js を下記の通りに修正してください。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Note</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// これがState</span>
    <span class="token comment">// JavaScriptのオブジェクトとして登録する</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      counter<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// ClickされたらStateのカウンタをインクリメント</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      counter<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// (3, &quot;Component&quot;) =&gt; &quot;Component! Component!! Component!!!&quot;</span>
  <span class="token function-variable function">constructWord</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">number<span class="token punctuation">,</span> word</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> words <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> counter <span class="token operator">&lt;</span> number<span class="token punctuation">;</span> counter<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      words <span class="token operator">+=</span> word <span class="token operator">+</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span>counter <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> words<span class="token punctuation">.</span><span class="token function">trimEnd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">// インラインスタイル</span>
  mystyle <span class="token operator">=</span> <span class="token punctuation">{</span>
    display<span class="token operator">:</span> <span class="token string">&quot;flex&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;justify-content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;align-items&quot;</span><span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>mystyle<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* ボタンをクリックされたらclick()メソッドが発火し、Stateが更新される */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token string">&quot;min-width&quot;</span><span class="token operator">:</span> <span class="token string">&quot;75px&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
          Click me<span class="token operator">!</span><span class="token operator">!</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* Stateのカウンタの数だけ叫ぶ */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">constructWord</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>word<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ここまで修正すると下記の通りになります。</p> <p><img src="/bootcamp/assets/img/image5.2292de1c.png" alt="画像5"></p> <p>State は Component の内部でのみ生きているデータベースのようなものです。State を<code>setState</code>メソッド経由で更新を行うと、関連するコンポーネントや DOM が自動で更新されます。</p> <p>実際に&quot;Click me!!&quot;のボタンをクリックしてみてください。</p> <p>チェックポイント(2/3)</p> <ul><li>State を利用してローカルデータベースを作成できる</li> <li>setState メソッドで State を更新すると DOM が自動でリロードされる</li></ul> <div class="custom-block tip"><p class="custom-block-title">Redux</p> <p>State を利用することで、単一のコンポーネントでデータを保存できることがわかりました。しかし認証やフォームデータなど複数のコンポーネントを跨ってグローバルに書き込みを行いたい場合もあります。また State をもっと複雑に利用したいケースもでてきます。</p> <p>その場合は Redux というモジュールを使うと良いでしょう。Redux はアプリケーションの状態を管理するためのモジュールで React と親和性が非常に高いためよく利用されます。</p> <p>ただし Redux は扱いに癖があり、特に TypeScript なしでは導入が難しいためこのハンズオンでは紹介にとどめておきます。</p> <p>詳しくはこちら &gt; <a href="https://react-redux.js.org/introduction/quick-start" target="_blank" rel="noopener noreferrer">React Redux<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <h3 id="api-サーバからデータを取得してみる"><a href="#api-サーバからデータを取得してみる" class="header-anchor">#</a> API サーバからデータを取得してみる</h3> <p>Componentの機能少し寄り道をします。</p> <p>親子間でのデータのデータのやりとりができるようになりましたが、このままではアプリケーションに組み込まれた情報でのみ表示ができるだけです。ほかのユーザーの情報やリアルタイムな情報等、アプリケーション以外のデータリソースからデータを取得する場合にはどのようにするのがよいでしょうか？</p> <p>今回は外部にある HTTP のインタフェースを備えた API サーバをデータリソースとして、そこからデータを取得してアプリケーションに組み込んでみましょう。
データリソースにアクセスするためのクライアントモジュールとして、<code>axios</code>というモジュールを利用します。</p> <h3 id="axios-を使ってみよう"><a href="#axios-を使ってみよう" class="header-anchor">#</a> axios を使ってみよう</h3> <p>このハンズオンで起動した docker-compose は起動時にモックサーバも一緒に立ち上がるように設定されています。
このモックサーバは 5000 番ポートをリッスンしているので、起動を確認するために一度アクセスしてみましょう。</p> <p>モックサーバ &gt; <a href="http://localhost:5000" target="_blank" rel="noopener noreferrer">localhost:5000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/bootcamp/assets/img/image6.776ee4b5.png" alt="画像6"></p> <p>このモックサーバが配信しているコンテンツをフェッチし、ブラウザに表示してみましょう。
src/App.js に修正を加えます。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      info<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">click</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5000/menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        info<span class="token operator">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>click<span class="token punctuation">}</span><span class="token operator">&gt;</span>Call <span class="token constant">API</span><span class="token operator">!</span><span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>App クラスに新たな State<code>info</code>を追加し、また<code>axios</code>で HTTP のリクエストを送るメソッド<code>click</code>を追加しました。
&quot;Call API&quot;ボタンを押下すると文字列が表示されたと思います。</p> <p>これは<a href="http://localhost:5000" target="_blank" rel="noopener noreferrer">localhost:5000<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>で配信しているコンテンツを<code>axios</code>モジュールが拾ってきて State に保存したため、その内容が表示されることになりました。</p> <p><code>axios</code>を利用することで、RESTFul API などの HTTP インタフェースで公開しているサーバと通信ができます。</p> <p>チェックポイント</p> <ul><li><code>axios</code>モジュールを使ってみた</li> <li>外部 API コールを試してみた</li></ul> <h3 id="コンポーネントのライフサイクル-lifecycle"><a href="#コンポーネントのライフサイクル-lifecycle" class="header-anchor">#</a> コンポーネントのライフサイクル: LifeCycle</h3> <p>少しコンポーネントの複雑な機能について触れてみましょう。Component を作成することに注力しましたが、ここでは Component の作成の方法に注視してみましょう。</p> <p>多くの Web サイトで「画面の初期表示のタイミングで外部からデータを取得して画面に表示する」というケースを見かけます。これを React の言葉に置き換えると「Component が表示されるタイミングで<code>axios</code>等のクライアントでデータをフェッチして Component に受け渡している」といったところでしょうか。
この機能は Component のライフサイクルを利用することで実現できます。実装してみましょう！</p> <p>src/App.js を下記のように修正します。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      info<span class="token operator">:</span> <span class="token string">&quot;Loading...&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">componentDidMount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5000/menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        info<span class="token operator">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>info<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div><p>画面を何度もリロードすると、一瞬&quot;Loading...&quot;という文字列が見えた瞬間、Json が画面に表示されたはずです。</p> <p><img src="/bootcamp/assets/img/Gif1.69158039.gif" alt="Gif1"></p> <p>初めて出てきた<code>componentDidMount</code>メソッドは<code>React.Component</code>で定義されているメソッドで、ブラウザ上にコンポーネントが描画された直後に走るメソッドです。</p> <p>React のコンポーネントは<code>componentDidMount</code>のようにいくつかのライフサイクル用のメソッドが用意されています。
これらのライフサイクルメソッドを利用することでコンポーネントの初期化や後処理を定義できます。</p> <ol><li><p>コンポーネントが生成されるタイミング</p> <ul><li>コンストラクタ</li></ul></li> <li><p>コンポーネントが DOM にロード(マウント)されるタイミング</p> <ul><li>componentDidMount</li></ul></li> <li><p>コンポーネントが DOM から削除されるタイミング</p> <ul><li>componentWillUnmount</li></ul></li></ol> <p>それぞれのタイミングで実施したい処理があれば、それぞれのメソッドの中に実装してあげると良いでしょう。</p> <p>詳しくはこちら &gt; <a href="https://ja.reactjs.org/docs/state-and-lifecycle.html" target="_blank" rel="noopener noreferrer">state とライフサイクル | React Docs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>チェックポイント</p> <ul><li>コンポーネントにライフサイクルがあることを理解した</li> <li>ライフサイクルに合わせてフックを作成することができた</li></ul> <h2 id="自分の手でフロントエンドを作成してみましょう"><a href="#自分の手でフロントエンドを作成してみましょう" class="header-anchor">#</a> 自分の手でフロントエンドを作成してみましょう</h2> <p>先の節で<code>axios</code>モジュールを用いて外部サーバからデータを取得してきました。今までの知識を元に取得してきたデータを下記のような一覧表示する UI を作成してみましょう。</p> <p><img src="/bootcamp/assets/img/image7.8b2d3d2a.png" alt="画像7"></p> <p>配信されているデータは下記の Food スキーマの配列です。データをパースして State に保存し、適切なコンポーネントに渡してあげましょう。</p> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Food</span> <span class="token punctuation">{</span>
  id<span class="token operator">:</span> Number<span class="token punctuation">;</span>
  name<span class="token operator">:</span> String<span class="token punctuation">;</span>
  description<span class="token operator">:</span> String<span class="token punctuation">;</span>
  price<span class="token operator">:</span> Number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><details class="custom-block details"><summary>サンプルコード</summary> <p><code>src/Food.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Food</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// インラインスタイルは御行儀が悪く、本来避けるべき</span>
  <span class="token comment">// 代わりにCSS Modulesなどのスタイルローダーを使いましょう</span>
  containerStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
    margin<span class="token operator">:</span> <span class="token string">&quot;15px&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  rowStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
    display<span class="token operator">:</span> <span class="token string">&quot;flex&quot;</span><span class="token punctuation">,</span>
    justifyContent<span class="token operator">:</span> <span class="token string">&quot;flex-start&quot;</span><span class="token punctuation">,</span>
    alignItems<span class="token operator">:</span> <span class="token string">&quot;center&quot;</span><span class="token punctuation">,</span>
    fontSize<span class="token operator">:</span> <span class="token string">&quot;0.6em&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  nameStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
    margin<span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  priceStyle <span class="token operator">=</span> <span class="token punctuation">{</span>
    margin<span class="token operator">:</span> <span class="token string">&quot;0 5px&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>containerStyle<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>nameStyle<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>rowStyle<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>small<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>description<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>small<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>priceStyle<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>price<span class="token punctuation">}</span>円<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>src/App.js</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">&quot;react&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;./App.css&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Food <span class="token keyword">from</span> <span class="token string">&quot;./Food&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      data<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">componentDidMount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:5000/menu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        data<span class="token operator">:</span> response<span class="token punctuation">.</span>data<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> list<span class="token punctuation">;</span>
    <span class="token comment">// Q: this.state.dataがundefinedになることはある？</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      list <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>Food
            <span class="token comment">// このkeyはReactでコンポーネントのリストを作成する際に必要とされるもの</span>
            <span class="token comment">// keyの値はリストの中でユニークであるべき</span>
            <span class="token comment">// 詳細 : https://ja.reactjs.org/docs/lists-and-keys.html</span>
            key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span>
            name<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>name<span class="token punctuation">}</span>
            description<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>description<span class="token punctuation">}</span>
            price<span class="token operator">=</span><span class="token punctuation">{</span>row<span class="token punctuation">.</span>price<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      list <span class="token operator">=</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Loading<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">&quot;App&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>header className<span class="token operator">=</span><span class="token string">&quot;App-header&quot;</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> textAlign<span class="token operator">:</span> <span class="token string">&quot;left&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>list<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>header<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> App<span class="token punctuation">;</span>
</code></pre></div></details> <h2 id="最後に"><a href="#最後に" class="header-anchor">#</a> 最後に</h2> <p><s>いかがでしたか？</s> 以上で React のハンズオンは終了です。</p> <p>昨今のフロントエンド界隈は比較的落ち着いてきた(=デファクトが固まりつつある)印象がありますが、それでも流行り廃りの早い世界です。この文書も、いつ時代遅れになるかもわかりません。</p> <p>ですが、フロントエンドはアプリケーションの花形です。ぜひフロントエンドの知見を日々広げ、花形の開発者として活躍してもらえればうれしいです。</p> <h2 id="読み物"><a href="#読み物" class="header-anchor">#</a> 読み物</h2> <p>ここから先は React に関する情報をまとめた読み物です。興味のある人はさっと目を通してみてください。</p> <h3 id="spa-はどこへ"><a href="#spa-はどこへ" class="header-anchor">#</a> SPA はどこへ？</h3> <p>Bootcamp 冒頭で</p> <blockquote><p>React でシングルページアプリケーション(=SPA)を書こう</p></blockquote> <p>と書いておきながら、SPA という言葉が一切出てきませんでした。実は、すでにこの Bootcamp で作成したコードが SPA になっています。</p> <p><a href="https://ja.wikipedia.org/wiki/%E3%82%B7%E3%83%B3%E3%82%B0%E3%83%AB%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3" target="_blank" rel="noopener noreferrer">シングルページアプリケーション | Wikipedia<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>サーバから配信する HTML は単一
<ul><li>画面遷移が滑らか＆爆速</li></ul></li> <li>フロントエンドの DOM の操作を JavaScript で行う
<ul><li>物理 DOM の操作と比べて軽量</li></ul></li></ul> <p>といったことが特徴です。create-react-app で構成したプロジェクトはデフォルトで SPA となっています。SPA でないものとして SSR(=サーバサイドレンダリング)が挙げられます。</p> <h3 id="jsx-javascript-経験者向け"><a href="#jsx-javascript-経験者向け" class="header-anchor">#</a> JSX(JavaScript 経験者向け)</h3> <p>この Bootcamp では JavaScript のコードだとは思えない HTML と ES2015 のコードが混ぜこぜになっているようなコードが出てきました。</p> <p>この HTML 風の表現になっている部分は、<a href="http://facebook.github.io/jsx/" target="_blank" rel="noopener noreferrer">JSX<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>という JavaScript の拡張構文で、実際には JavaScript にトランスパイルされてから実行されます。</p> <p>JSX についての詳細には踏み込みませんが、3 点だけ注意しておきます。</p> <ol><li>JSX は HTML 風の記法で HTML 出力のためのコードを記述できるものであって、HTML そのものではありません。</li> <li>HTML では CSS のクラス名を適用するのに class 属性を記述しますが、class は ECMAScript の予約語ですので、これを避けて className という語を用います。(上の例にあるとおりです。)</li> <li>HTML では label タグに for 属性を使いますが、for は JavaScript の予約語ですので、これを避けて htmlFor という語を用います。</li></ol> <p>JSX は、あくまでも記法ですが、JSX を使わずに同じ意味のコードを書くことは可能です。ですが React で開発する人のほとんどは JSX を利用しますので明確な理由がない場合は JSX を利用することをお勧めします。</p> <h3 id="pwa-pwa-を知っている人向け"><a href="#pwa-pwa-を知っている人向け" class="header-anchor">#</a> PWA(PWA を知っている人向け)</h3> <p>React のビルド成果物は PWA 対応しています。PWA の設定方法はとても簡単で、src/index.js の下記の部分を変更するだけです。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// If you want your app to work offline and load faster, you can change</span>
<span class="token comment">// unregister() to register() below. Note this comes with some pitfalls.</span>
<span class="token comment">// Learn more about service workers: https://bit.ly/CRA-PWA</span>
serviceWorker<span class="token punctuation">.</span><span class="token function">unregister</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>コメントで書いてあるとおり、<code>unregister()</code>を<code>register()</code>に変えてあげるだけで PWA 対応になります。</p> <div><hr> <span>CC BY-SA Licensed | Copyright (c) 2020, Internet Initiative Japan Inc.</span></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/iij/bootcamp/edit/master/src/frontend/react/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/13/2021, 9:08:27 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/bootcamp/assets/js/app.3ff76bba.js" defer></script><script src="/bootcamp/assets/js/2.f4976132.js" defer></script><script src="/bootcamp/assets/js/8.abec832f.js" defer></script><script src="/bootcamp/assets/js/11.f7af7a70.js" defer></script><script src="/bootcamp/assets/js/10.5e2035fa.js" defer></script>
  </body>
</html>
