(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{423:function(t,s,a){"use strict";a.r(s);var e=a(42),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("header-table"),t._v(" "),a("h1",{attrs:{id:"web-server-apache-編"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#web-server-apache-編"}},[t._v("#")]),t._v(" Web Server: Apache 編")]),t._v(" "),a("p",[t._v("このハンズオンの狙い")]),t._v(" "),a("ul",[a("li",[t._v("Docker に慣れる")]),t._v(" "),a("li",[t._v("Apache を自力でビルドしてみる")]),t._v(" "),a("li",[t._v("Apache の設定ファイルを眺めてみる")]),t._v(" "),a("li",[t._v("Apache の動作確認とパフォーマンス測定をする")])]),t._v(" "),a("h2",{attrs:{id:"事前準備"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事前準備"}},[t._v("#")]),t._v(" 事前準備")]),t._v(" "),a("ul",[a("li",[t._v("Docker を使用できる")])]),t._v(" "),a("h3",{attrs:{id:"事前準備手順"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#事前準備手順"}},[t._v("#")]),t._v(" 事前準備手順")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("ubuntu イメージを使えるようにする")]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("docker pull ubuntu\ndocker images\n\nREPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE\nubuntu                         latest              4c108a37151f        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" weeks ago         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(".2MB\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"資料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#資料"}},[t._v("#")]),t._v(" 資料")]),t._v(" "),a("h3",{attrs:{id:"apache-を自力でビルドしてみよう"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apache-を自力でビルドしてみよう"}},[t._v("#")]),t._v(" Apache を自力でビルドしてみよう")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://httpd.apache.org/docs/2.4/install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("インストールドキュメント"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("このドキュメントとメッセージを読みながら進めてみます。")]),t._v(" "),a("p",[t._v("ubuntu 使用を前提にしていますが、CentOS や FreeBSD など、他のメジャーな OS ならそれほどはまらないはずです。\nただし、他の OS を使う場合は、その OS のパッケージシステム (yum, pkg など) にある程度慣れている必要があるかもしれません。\n必要そうなパッケージ名はググれば見つけられます。")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("インストールのプランを立てる")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("通常どおりインストールすると /usr/bin や /usr/local/bin, /usr/local/apache2 などに配置される")])]),t._v(" "),a("li",[a("p",[t._v("今回は別の場所に入れてみましょう")]),t._v(" "),a("div",{staticClass:"language-Text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("/opt/{bin,lib,share...}  自分でビルドした必要なプログラム\n/opt/apache2             自分でビルドした Apache\n")])])])]),t._v(" "),a("li",[a("p",[t._v("素の ubuntu イメージで作業して、インストールしたパッケージなどはあとで Dockerfile などにまとめます")])]),t._v(" "),a("li",[a("p",[t._v("インストール先の /opt は、ホスト側ディレクトリに残るようにします")])])])]),t._v(" "),a("li",[a("p",[t._v("Docker コンテナを立ち上げる")]),t._v(" "),a("ul",[a("li",[t._v("docker run -it --rm --name apache-test -v ~/opt:/opt ubuntu /bin/bash\n"),a("ul",[a("li",[t._v("Windows 環境では winpty docker run -it 〜")])])])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("docker run -it --rm --name apache-test -v ~/opt:/opt ubuntu /bin/bash\nroot@efa7173e38f5:/"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Apache httpd をダウンロードして展開")]),t._v(" "),a("ul",[a("li",[t._v("ダウンロードサイトは自社のを使うことにします")]),t._v(" "),a("li",[a("a",{attrs:{href:"http://ftp.iij.ad.jp/pub/network/apache/httpd/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ftp.iij.ad.jp apache httpd"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("httpd-2.4.39.tar.bz2 または httpd-2.4.39.tar.gz をダウンロードする\n"),a("ul",[a("li",[t._v("tar コマンドでエラーが出る場合は、bzip2 コマンドなどをインストールして解凍しましょう (bzip2 -d httpd-2.4.39.tar.bz2)")])])])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget http://ftp.iij.ad.jp/pub/network/apache/httpd/httpd-2.4.39.tar.bz2")]),t._v("\nbash: wget: "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" not found\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# curl")]),t._v("\nbash: curl: "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("command")]),t._v(" not found\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# apt update")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("省略"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# apt install wget")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("省略"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget http://ftp.iij.ad.jp/pub/network/apache/httpd/httpd-2.4.39.tar.bz2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("省略"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar xvf httpd-2.4.39.tar.bz2")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd httpd-2.4.39")]),t._v("\nroot@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("configure")]),t._v(" "),a("ul",[a("li",[t._v("./configure --help を一度読んでみるといいと思います")]),t._v(" "),a("li",[t._v("インストールプランに従って、prefix を設定してみます")])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt/apache2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nchecking "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" APR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". no\nconfigure: error: APR not found.  Please "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" the documentation.\n")])])])]),t._v(" "),a("li",[a("p",[t._v("APR をダウンロードしてインストール")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://ftp.iij.ad.jp/pub/network/apache/apr/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ftp.iij.ad.jp apr"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("apr-1.7.0.tar.bz2 をダウンロードする")])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd ..")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget http://ftp.iij.ad.jp/pub/network/apache/apr/apr-1.7.0.tar.bz2")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar xvf apr-1.7.0.tar.bz2")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd apr-1.7.0")]),t._v("\nroot@efa7173e38f5:~/apr-1.7.0"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nconfigure: error: "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("/root/apr-1.7.0':\nconfigure: error: no acceptable C compiler found "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),t._v("\nSee "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("config.log' "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" details\n")])])])]),t._v(" "),a("li",[a("p",[t._v("コンパイラなど、ビルドに必要なプログラムをインストール")]),t._v(" "),a("ul",[a("li",[t._v("ubuntu のパッケージを調べたところ、build-essential というパッケージで必要な一式が入るもよう\n"),a("ul",[a("li",[t._v("CentOS や FreeBSD ではパッケージ名が違います")]),t._v(" "),a("li",[t._v("gcc などの C コンパイラと周辺ツールをインストールしてください")])])])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" build-essential\n")])])])]),t._v(" "),a("li",[a("p",[t._v("再び configure")]),t._v(" "),a("ul",[a("li",[t._v("ビルドに使うコマンドがインストールできたら、PATH を通します")])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~/apr-1.7.0"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~/apr-1.7.0"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~/apr-1.7.0"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make install")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~/apr-1.7.0"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls -l /opt/bin")]),t._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n-rwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6945")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":37 apr-1-config\nroot@efa7173e38f5:~/apr-1.7.0"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# export PATH=/opt/bin:$PATH")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("httpd ディレクトリに戻って、再び configure")]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt/apache2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nchecking "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" APR-util"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". no\nconfigure: error: APR-util not found.  Please "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" the documentation.\n")])])])]),t._v(" "),a("li",[a("p",[t._v("APR-util をダウンロードしてインストール")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"http://ftp.iij.ad.jp/pub/network/apache/apr/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ftp.iij.ad.jp apr"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("apr-util-1.6.1.tar.bz2 をダウンロードする")])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget http://ftp.iij.ad.jp/pub/network/apache/apr/apr-util-1.6.1.tar.bz2")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# tar xvf apr-util-1.6.1.tar.bz2")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd apr-util-1.6.1")]),t._v("\nroot@efa7173e38f5:~/apr-util-1.6.1"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nchecking "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" APR"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". no\nconfigure: error: APR could not be located. Please use the --with-apr option.\nroot@efa7173e38f5:~/apr-util-1.6.1"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt --with-apr=/opt/bin/apr-1-config")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~/apr-util-1.6.1"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nxml/apr_xml.c:35:10: fatal error: expat.h: No such "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" or directory\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#include <expat.h>")]),t._v("\n          ^~~~~~~~~\ncompilation terminated.\n/root/apr-util-1.6.1/build/rules.mk:206: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'xml/apr_xml.lo'")]),t._v(" failed\nmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("xml/apr_xml.lo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\nmake"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(": Leaving directory "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/root/apr-util-1.6.1'")]),t._v("\n/root/apr-util-1.6.1/build/rules.mk:118: recipe "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" target "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'all-recursive'")]),t._v(" failed\nmake: *** "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("all-recursive"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" Error "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("expat ライブラリをインストール")]),t._v(" "),a("ul",[a("li",[t._v("どれを自力で入れて、どれをパッケージで入れるかは悩ましいところ")])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" search expat\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libexpat1-dev\n")])])])]),t._v(" "),a("li",[a("p",[t._v("APR-util のビルドに戻る")]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~/apr-util-1.6.1"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make")]),t._v("\nroot@efa7173e38f5:~/apr-util-1.6.1"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make install")]),t._v("\nroot@efa7173e38f5:~/apr-util-1.6.1"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls -l /opt/bin/")]),t._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v("\n-rwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6945")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":37 apr-1-config\n-rwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6121")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":51 apu-1-config\n")])])])]),t._v(" "),a("li",[a("p",[t._v("httpd のビルドに戻る")]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt/apache2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nchecking "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" pcre-config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nconfigure: error: pcre-config "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" libpcre not found. PCRE is required and available from http://pcre.org/\n")])])])]),t._v(" "),a("li",[a("p",[t._v("PCRE ライブラリをインストール")]),t._v(" "),a("ul",[a("li",[t._v("ライブラリ(のバージョン)が複数ある場合、私はまずは新しいのから試すようにしています")])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" search pcre\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" libpcre3-dev\n")])])])]),t._v(" "),a("li",[a("p",[t._v("httpd のビルドに戻る")]),t._v(" "),a("ul",[a("li",[t._v("make distclean は、ビルドの中間ファイルやゴミなどを消す")])]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make distclean")]),t._v("\nroot@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ./configure --prefix=/opt/apache2")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nconfigure: summary of build options:\n\nServer Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.4")]),t._v(".39\nInstall prefix: /opt/apache2\nC compiler:     gcc\nCFLAGS:          -g -O2 -pthread\nCPPFLAGS:        -DLINUX -D_REENTRANT -D_GNU_SOURCE\nLDFLAGS:\nLIBS:\nC preprocessor: gcc -E\n\nroot@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# make install")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nroot@efa7173e38f5:~/httpd-2.4.39"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls -l /opt/apache2")]),t._v("\ntotal "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("576")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 bin\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11")]),t._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("352")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 build\ndrwxr-xr-x   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),t._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 cgi-bin\ndrwxr-xr-x   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),t._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("224")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 conf\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("22")]),t._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("704")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 error\ndrwxr-xr-x   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("96")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 htdocs\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("179")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5728")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 icons\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("65")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2080")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 include\ndrwxr-xr-x   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" root root   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 logs\ndrwxr-xr-x   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(" root root  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("man")]),t._v("\ndrwxr-xr-x "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("205")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6560")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 manual\ndrwxr-xr-x  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("89")]),t._v(" root root "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2848")]),t._v(" Jul "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(":10 modules\n")])])]),a("ul",[a("li",[t._v("この段階で「XML_なんとか ライブラリが見つからない」旨のエラーメッセージが出た場合\n"),a("ul",[a("li",[t._v("apr-util の configure & make install をやり直す")]),t._v(" "),a("li",[t._v("再度 httpd を configure & make install する")])])])])])]),t._v(" "),a("h3",{attrs:{id:"apache-の設定ファイルを眺めてみる"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apache-の設定ファイルを眺めてみる"}},[t._v("#")]),t._v(" Apache の設定ファイルを眺めてみる")]),t._v(" "),a("p",[t._v("~/opt/apache2/conf/httpd.conf を読んでみよう。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("ping や ip しようとしたらコマンドがなかったのでインストール")]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/hosts\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" iproute2 iputils-ping\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ip")]),t._v(" addr\n")])])])]),t._v(" "),a("li",[a("p",[t._v("サーバを起動するためには、最低限 ServerName を設定する必要がある")]),t._v(" "),a("ul",[a("li",[t._v("コメントを読んで、とりあえず IP アドレスを設定する")])]),t._v(" "),a("div",{staticClass:"language-Text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("ServerName 172.17.0.2:80\n")])])]),a("ul",[a("li",[t._v("/etc/hosts にサーバ名を各方法でも大丈夫です")])]),t._v(" "),a("div",{staticClass:"language-Text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("root@efa7173e38f5:~# cat /etc/hosts\n127.0.0.1   localhost\n::1 localhost ip6-localhost ip6-loopback\nfe00::0 ip6-localnet\nff00::0 ip6-mcastprefix\nff02::1 ip6-allnodes\nff02::2 ip6-allrouters\n172.17.0.2  efa7173e38f5  www.example.com\n")])])])])]),t._v(" "),a("h3",{attrs:{id:"apache-の動作確認とパフォーマンス測定をする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apache-の動作確認とパフォーマンス測定をする"}},[t._v("#")]),t._v(" Apache の動作確認とパフォーマンス測定をする")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("httpd を起動する")]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# /opt/apache2/bin/apachectl -k start")]),t._v("\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ps auxww | fgrep httpd")]),t._v("\nroot     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48683")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("73548")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3644")]),t._v(" ?        Ss   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":00 /opt/apache2/bin/httpd -k start\ndaemon   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48684")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1280024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3696")]),t._v(" ?        Sl   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":00 /opt/apache2/bin/httpd -k start\ndaemon   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48685")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1280024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3696")]),t._v(" ?        Sl   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":00 /opt/apache2/bin/httpd -k start\ndaemon   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48688")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1280024")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3696")]),t._v(" ?        Sl   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":00 /opt/apache2/bin/httpd -k start\nroot     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("48769")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("11460")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1100")]),t._v(" pts/0    S+   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":20   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(":00 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -F --color"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("auto httpd\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# wget http://172.17.0.2/index.html")]),t._v("\n--2019-07-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":31:56--  http://172.17.0.2/index.html\nConnecting to "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".0.2:80"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". connected.\nHTTP request sent, awaiting response"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" OK\nLength: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("text/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nSaving to: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),t._v("\n\nindex.html          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("%"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v("  --.-KB/s    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" 0s\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-07-18 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v(":31:56 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.00")]),t._v(" MB/s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" - "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'index.html'")]),t._v(" saved "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v("/45"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nroot@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cat index.html")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),t._v("It works"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/h"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/body"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/html"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("ベンチマークを取ってみる")]),t._v(" "),a("div",{staticClass:"language-Shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("root@efa7173e38f5:~"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ab -n 1000 -c 1000 http://172.17.0.2/index.html")]),t._v("\nThis is ApacheBench, Version "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$Revision")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1843412")]),t._v(" $"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nCopyright "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1996")]),t._v(" Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/\nLicensed to The Apache Software Foundation, http://www.apache.org/\n\nBenchmarking "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".0.2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("be patient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("700")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("800")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("900")]),t._v(" requests\nCompleted "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" requests\nFinished "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" requests\n\n\nServer Software:        Apache/2.4.39\nServer Hostname:        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".0.2\nServer Port:            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n\nDocument Path:          /index.html\nDocument Length:        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v(" bytes\n\nConcurrency Level:      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\nTime taken "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" tests:   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.818")]),t._v(" seconds\nComplete requests:      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("\nFailed requests:        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nTotal transferred:      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("289000")]),t._v(" bytes\nHTML transferred:       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45000")]),t._v(" bytes\nRequests per second:    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("354.87")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#/sec] (mean)")]),t._v("\nTime per request:       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2817.911")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nTime per request:       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.818")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mean, across all concurrent requests"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nTransfer rate:          "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100.15")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Kbytes/sec"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" received\n\nConnection Times "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n              min  mean"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("+/-sd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" median   max\nConnect:        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("71")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("30.1")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("66")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("151")]),t._v("\nProcessing:    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("211")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("187.8")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("148")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2244")]),t._v("\nWaiting:        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("172")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("185.2")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("119")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2243")]),t._v("\nTotal:         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("63")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("282")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("185.5")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("233")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2307")]),t._v("\n\nPercentage of the requests served within a certain "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ms"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("233")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("66")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("263")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("75")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("306")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("311")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("90")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("95")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("672")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("98")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("979")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("99")]),t._v("%    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("986")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("%   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2307")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("longest request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"質問"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#質問"}},[t._v("#")]),t._v(" 質問")]),t._v(" "),a("ul",[a("li",[t._v("ビルドが一度ですんなりいかなかったのはなぜでしょう？")])]),t._v(" "),a("h2",{attrs:{id:"追加課題"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#追加課題"}},[t._v("#")]),t._v(" 追加課題")]),t._v(" "),a("ul",[a("li",[t._v("httpd.conf に設定を入れてみる\n"),a("ul",[a("li",[t._v("NameVirtualHost を設定してみる (/etc/hosts にホスト名を追加、別のディレクトリにコンテンツを配置)")])])]),t._v(" "),a("li",[t._v("定番モジュール mod_rewrite などを設定する\n"),a("ul",[a("li",[t._v("ホスト部、パス部などを書き換える")])])]),t._v(" "),a("li",[t._v("/opt/apache2/htdocs 以下に大きめのファイルを置いて、パフォーマンス測定する")]),t._v(" "),a("li",[t._v("追加したモジュールをすべてインストールした Docker image を作成する\n"),a("ul",[a("li",[t._v("httpd, apr, apr-util のソースを、/root 以下にコピーする")])])]),t._v(" "),a("li",[t._v("http/2 を使えるようにしてみる\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://httpd.apache.org/docs/2.4/en/howto/http2.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTTP/2 guide"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("Docker 設定で母艦からアクセスできるようにして、Chrome などで見てみる")]),t._v(" "),a("li",[t._v("Chrome 開発者ツールで確認する")])])])]),t._v(" "),a("credit-footer")],1)}),[],!1,null,null,null);s.default=n.exports}}]);