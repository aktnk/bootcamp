(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{525:function(t,s,a){"use strict";a.r(s);var n=a(45),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("header-table"),t._v(" "),a("h1",{attrs:{id:"goでwebアプリケーションを作る"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#goでwebアプリケーションを作る"}},[t._v("#")]),t._v(" GoでWebアプリケーションを作る")]),t._v(" "),a("h1",{attrs:{id:"_0-この講義について-5-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-この講義について-5-min"}},[t._v("#")]),t._v(" 0. この講義について ( 5 min )")]),t._v(" "),a("h2",{attrs:{id:"_0-1-目的"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-1-目的"}},[t._v("#")]),t._v(" 0.1. 目的")]),t._v(" "),a("ul",[a("li",[t._v("あなたがプログラミングを行う際の選択肢として、Goを挙げられる為の第一歩となること\n"),a("ul",[a("li",[t._v("より、知らない人に知ってもらうことを重要視しています")])])])]),t._v(" "),a("h2",{attrs:{id:"_0-2-対象者"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-2-対象者"}},[t._v("#")]),t._v(" 0.2. 対象者")]),t._v(" "),a("p",[t._v("想定レベルは以下の通りです。")]),t._v(" "),a("ul",[a("li",[t._v("ls, cd 程度のLinuxファイル操作が行える")]),t._v(" "),a("li",[t._v("curl の操作が行える")]),t._v(" "),a("li",[t._v("実行形式ファイル(.exeなど)という存在を知っている")]),t._v(" "),a("li",[a("code",[t._v("if")]),t._v(", "),a("code",[t._v("for")]),t._v(", "),a("code",[t._v("switch case")]),t._v(" などの、割と多くの言語で近い表現のある構文を知っている")]),t._v(" "),a("li",[t._v("関数、引数、戻り値 というキーワードを知っている")])]),t._v(" "),a("p",[t._v("出来ると理解が捗るスキルは以下の通りです。")]),t._v(" "),a("ul",[a("li",[t._v("クラス、メソッド というキーワードを知っている")]),t._v(" "),a("li",[t._v("どんな言語(COBOL, Javascript, bash, python, ...) でも良いので、簡単なコーディングを行ったことがある")])]),t._v(" "),a("p",[t._v("参加者の制限は特に設けていませんが、"),a("br"),t._v("\nGoを知らない方かつ、プログラミング技術をこれから身につけていきたい方へ伝える事に重点をおきコンテンツを作成しています。"),a("br"),t._v("\nそのため、既にGo言語を実用レベルで活用されている方は、退屈かと思われます。")]),t._v(" "),a("h2",{attrs:{id:"_0-3-下準備"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-3-下準備"}},[t._v("#")]),t._v(" 0.3. 下準備")]),t._v(" "),a("p",[t._v("事前に、"),a("RouterLink",{attrs:{to:"/server-app/go/var/md/init.html"}},[t._v("GoでWebアプリケーションを作る(下準備編)")]),t._v(" を参考に準備をしてください。"),a("br"),t._v("\n講義内では、下準備に対する質問は回答しません。受講年度の事前質問方法に合わせ、事前に確認してください。")],1),t._v(" "),a("h2",{attrs:{id:"_0-4-本資料の表現"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0-4-本資料の表現"}},[t._v("#")]),t._v(" 0.4. 本資料の表現")]),t._v(" "),a("ul",[a("li",[t._v("💻\n"),a("ul",[a("li",[t._v("受講者が操作する箇所を示します")])])]),t._v(" "),a("li",[t._v("♻️\n"),a("ul",[a("li",[t._v("受講者が操作した結果の想定を示します")])])]),t._v(" "),a("li",[t._v("🚀\n"),a("ul",[a("li",[t._v("もっと知ってみようのコーナーです。コーディング知識がある方や、今の講義では物足りないと思った方向けの内容です")])])]),t._v(" "),a("li",[a("code",[t._v("<ほげほげ>")]),t._v(" "),a("ul",[a("li",[t._v("任意の値を示します")]),t._v(" "),a("li",[t._v("入力値に本表現が用いられる場合は、任意の値(適切な値)に書き換えてください")])])]),t._v(" "),a("li",[a("code",[t._v("$ <コマンド>")]),t._v(" "),a("ul",[a("li",[t._v("上記 "),a("code",[t._v("$")]),t._v(" は、プロンプトを意味します。実際に入力は行いません")])])]),t._v(" "),a("li",[a("code",[t._v("[<要素>]")]),t._v(" "),a("ul",[a("li",[t._v("必須では無い要素を"),a("code",[t._v("[")]),t._v("と"),a("code",[t._v("]")]),t._v("で囲みます")])])]),t._v(" "),a("li",[a("code",[t._v("#...省略")]),t._v(" "),a("ul",[a("li",[t._v("途中要素を省略しています。本来ソースコードなどが存在する予定の場所です")])])]),t._v(" "),a("li",[a("code",[t._v("...")]),t._v(" "),a("ul",[a("li",[t._v("直前の要素をn回繰り返します")])])]),t._v(" "),a("li",[t._v("Go言語ソースコード上の、"),a("code",[t._v("// <任意のコメント>")]),t._v(" "),a("ul",[a("li",[t._v("コメントです。存在する状態でもソースコードが動作します")])])]),t._v(" "),a("li",[t._v("💻 の、"),a("code",[t._v(":# <任意の表現>")]),t._v(" "),a("ul",[a("li",[t._v("ハンズオンに対するコメントです。執筆者の任意のコメントもしくは、決まった表現をします")]),t._v(" "),a("li",[t._v("決まった表現は、以下です\n"),a("ul",[a("li",[a("code",[t._v(":# WORKPATH <ファイルパス>")]),t._v(" "),a("ul",[a("li",[t._v("動作させるカレントディレクトリを示します。"),a("code",[t._v("cd <ファイルパス>")]),t._v(" すると、快適にハンズオンを楽しめます")]),t._v(" "),a("li",[t._v("省略されている場合、pathの指定はありません。どのようなディレクトリから実行しても出力が同一となる想定です")])])]),t._v(" "),a("li",[a("code",[t._v(":# COPY <srcファイルパス> <dstファイルパス>")]),t._v(" "),a("ul",[a("li",[t._v("1つ以上前の演習で作成したソースコードを引き継げる演習の場合、コピーするパスを表示しています\n"),a("ul",[a("li",[t._v("記載のファイルパスは、フルパスとしているため、どのようなディレクトリからであっても実行可能です")])])]),t._v(" "),a("li",[a("code",[t._v("cp <srcファイルパス> <dstファイルパス>")]),t._v(" とすることで、引き継ぎができます")])])]),t._v(" "),a("li",[a("code",[t._v(":# TERMINAL <識別番号>")]),t._v(" "),a("ul",[a("li",[t._v("ハンズオンで利用するターミナルを識別します")])])])])])])])]),t._v(" "),a("h3",{attrs:{id:"解釈例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解釈例"}},[t._v("#")]),t._v(" 解釈例")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 9999999")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("リモートリポジトリのアドレス"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("上記のような記載であり、"),a("br"),t._v("\n<リモートリポジトリのアドレス> に当てはまる値が、"),a("code",[t._v("git@github.com:iij/bootcamp.git")]),t._v(" の場合、"),a("br"),t._v("\nターミナルへ入力する値は、以下のようになります。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone git@github.com:iij/bootcamp.git\n")])])]),a("h1",{attrs:{id:"_1-goとは-8-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-goとは-8-min"}},[t._v("#")]),t._v(" 1. Goとは ( 8 min )")]),t._v(" "),a("p",[t._v("Googleが主導して開発しているプログラミング言語です。"),a("br"),t._v("\n正式名称は、"),a("code",[t._v("Go")]),t._v(" ですが、ググラビリティが低いので、"),a("code",[t._v("Golang")]),t._v(" "),a("code",[t._v("golang")]),t._v(" "),a("code",[t._v("go言語")]),t._v(" "),a("code",[t._v("Go言語")]),t._v(" "),a("code",[t._v("go-lang")]),t._v(" 辺りで表記されていることが多いです。"),a("br"),t._v("\nわざわざ、"),a("a",{attrs:{href:"https://twitter.com/rob_pike/status/886054143235719169",target:"_blank",rel:"noopener noreferrer"}},[t._v("開発者の一人(Rob Pike 氏) が、ツイート"),a("OutboundLink")],1),t._v(" しています。")]),t._v(" "),a("h2",{attrs:{id:"_1-1-特徴"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-特徴"}},[t._v("#")]),t._v(" 1.1. 特徴")]),t._v(" "),a("h3",{attrs:{id:"_1-1-1-シンプルである"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-1-シンプルである"}},[t._v("#")]),t._v(" 1.1.1. シンプルである")]),t._v(" "),a("p",[t._v("設計思想として単純さを是としています。"),a("br"),t._v(" "),a("a",{attrs:{href:"https://talks.golang.org/2015/simplicity-is-complicated.slide#1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Simplicity is Complicated"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("例えば、言語仕様。使用されるキーワードは25個しかありません。"),a("br"),t._v(" "),a("a",{attrs:{href:"https://golang.org/ref/spec#Keywords",target:"_blank",rel:"noopener noreferrer"}},[t._v("The Go Programming Language Specification#Keywords"),a("OutboundLink")],1),a("br"),t._v("\n表現や構造がシンプルであるため、学習コストが低いという側面があります。")]),t._v(" "),a("h3",{attrs:{id:"_1-1-2-標準パッケージが充実している"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-2-標準パッケージが充実している"}},[t._v("#")]),t._v(" 1.1.2. 標準パッケージが充実している")]),t._v(" "),a("p",[t._v("Go言語の環境を用意するだけで、"),a("a",{attrs:{href:"https://golang.org/pkg/",target:"_blank",rel:"noopener noreferrer"}},[t._v("標準パッケージ"),a("OutboundLink")],1),t._v(" を扱え、より多くの作業が行えます。")]),t._v(" "),a("ul",[a("li",[t._v("testing: テスト記述")]),t._v(" "),a("li",[t._v("net/http: HTTPサーバ/クライアントなど")]),t._v(" "),a("li",[t._v("encoding: hexやテキスト表現")]),t._v(" "),a("li",[t._v("crypto: 暗号関係")]),t._v(" "),a("li",[t._v("...")])]),t._v(" "),a("h3",{attrs:{id:"_1-1-3-クロスコンパイルが容易"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-3-クロスコンパイルが容易"}},[t._v("#")]),t._v(" 1.1.3. クロスコンパイルが容易")]),t._v(" "),a("p",[t._v("コンパイル時に、環境変数"),a("code",[t._v("GOOS")]),t._v("や"),a("code",[t._v("GOARCH")]),t._v(" を設定するだけで、Windowsの実行形式ファイルやLinuxの実行形式ファイル、macOSの実行形式ファイルを出力することができます。"),a("br"),t._v("\n標準パッケージの多くが、クロスコンパイルされることを前提としているため、標準パッケージを活用することで、環境ごとに不具合の起きづらい開発を行うことが可能です。"),a("br"),t._v("\n例えば、ファイルパスの文字列結合は、"),a("code",[t._v('"path1" + "\\" + "path2"')]),t._v(" といった表現はせず、"),a("code",[t._v("path/filepath")]),t._v(" の関数"),a("code",[t._v("Join")]),t._v(" を用い、"),a("code",[t._v('filepath.Join("path1", "path2")')]),t._v("というように表現することをお勧めします。")]),t._v(" "),a("p",[t._v("注意しておかなければいけない点としては、一部パッケージには、OS依存のものがあるということです。"),a("br"),t._v("\n例えば、Windowsのレジストリに対する処理のような、OSに依存するものがあります。")]),t._v(" "),a("h3",{attrs:{id:"_1-1-4-周辺ツールが標準で提供される"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-4-周辺ツールが標準で提供される"}},[t._v("#")]),t._v(" 1.1.4. 周辺ツールが標準で提供される")]),t._v(" "),a("p",[t._v("Go言語をインストールするだけで、パッケージの管理やダウンロード、コンパイル、テスト、字句解析、ドキュメント生成など、多くのことが実行できます。"),a("br"),t._v(" "),a("code",[t._v("go <subcommand>")]),t._v(" 形式で、それらのツールを扱うことが可能です。"),a("br"),t._v("\n参考: "),a("a",{attrs:{href:"https://golang.org/cmd/",target:"_blank",rel:"noopener noreferrer"}},[t._v("コマンド一覧"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"_1-1-5-並行プログラミングが文法レベルでサポートされている"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-5-並行プログラミングが文法レベルでサポートされている"}},[t._v("#")]),t._v(" 1.1.5. 並行プログラミングが文法レベルでサポートされている")]),t._v(" "),a("p",[t._v("とても簡単に並行プログラミングを作成することができます。"),a("br"),t._v("\n並行プログラミングしない場合は、"),a("code",[t._v("func(){//<yourCode>}()")]),t._v(" のような形で関数を呼び出せます。"),a("br"),t._v("\n対して、並行プログラミングする場合は、"),a("code",[t._v("go func(){//<yourCode>}()")]),t._v(" のような形で関数を呼び出します。"),a("br"),t._v("\nわずか、3 byteほどの差分で並行プログラミングを表すことが可能です。")]),t._v(" "),a("p",[t._v("興味のある方は、"),a("a",{attrs:{href:"https://www.oreilly.co.jp/books/4900900664/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pthreads プログラミング"),a("OutboundLink")],1),t._v(" などの、他言語のマルチスレッド記法を学習すると、"),a("br"),t._v("\nこの容易さに感動できるのではないでしょうか。")]),t._v(" "),a("p",[t._v("なお、Go言語での並行プログラミングさせたスレッドは、Goroutine(ごーるーちん) と呼びます。")]),t._v(" "),a("h4",{attrs:{id:"goroutineは、カーネルスレッドではありません。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#goroutineは、カーネルスレッドではありません。"}},[t._v("#")]),t._v(" 🚀 Goroutineは、カーネルスレッドではありません。")]),t._v(" "),a("p",[t._v("OSのカーネルスレッドとは異なり、ユーザ空間で動作する軽量なスレッドです。"),a("br"),t._v("\nそれぞれのGoroutineの管理（スケジューリングなど）も、1つのユーザ空間スレッドとして動作しています。")]),t._v(" "),a("h3",{attrs:{id:"_1-1-6-gopher-がかわいい"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-6-gopher-がかわいい"}},[t._v("#")]),t._v(" 1.1.6. Gopher がかわいい")]),t._v(" "),a("p",[t._v("RFC1436 の "),a("a",{attrs:{href:"https://ja.wikipedia.org/wiki/Gopher",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gopher"),a("OutboundLink")],1),t._v(" ではありません。"),a("br"),t._v("\nGo の "),a("a",{attrs:{href:"https://golang.org/doc/gopher/gopherbw.png",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gopher"),a("OutboundLink")],1),t._v(" がかわいいです。")]),t._v(" "),a("h2",{attrs:{id:"_1-2-どこで使われているの"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-どこで使われているの"}},[t._v("#")]),t._v(" 1.2. どこで使われているの?")]),t._v(" "),a("p",[t._v("本講義でも活用している、"),a("a",{attrs:{href:"https://github.com/docker/docker-ce",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),a("OutboundLink")],1),t._v(" で扱われています。"),a("br"),t._v("\nまた、具体的なサービス名は見つけられませんが、"),a("a",{attrs:{href:"https://github.com/golang/go/wiki/GoUsers#japan",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go言語の日本ユーザ"),a("OutboundLink")],1),t._v(" にある通り、一度は聞いたことがありそうなサービスにGoが関わっているのかもしれませんね。")]),t._v(" "),a("p",[t._v("他にも、軽量なGit Webサービスのプロジェクト "),a("a",{attrs:{href:"https://gitea.io/en-us/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gitea"),a("OutboundLink")],1),t._v(" のような、Go言語の特徴を活かしたOSSはいくつもあります。"),a("br"),t._v("\nぜひ探してみてください。")]),t._v(" "),a("h1",{attrs:{id:"ハンズオンの開始"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ハンズオンの開始"}},[t._v("#")]),t._v(" ハンズオンの開始")]),t._v(" "),a("p",[t._v("以降の章では、事前準備したDockerを用い、ハンズオンを行います。")]),t._v(" "),a("p",[t._v("特別な注釈がない限り、実施するプロンプトは、コンテナ上です。"),a("br"),t._v("\nもしコンテナを実行していないようであれあば、以下のコマンドを実行してください。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n$ docker run --name go-tutor -it --rm hinoshiba/go-tutor:v2021r2 /bin/bash\n")])])]),a("p",[t._v("ハンズオンでは、こちらから指示したpathに、ディレクトリやファイルを作成してもらい、Go言語に触れてもらいます。"),a("br"),t._v("\n基本的なフォルダ構成は、 "),a("code",[t._v("/go/src/go_tutorial/<セクション名>/<プログラム名>/***.go")]),t._v(" のようになります。")]),t._v(" "),a("p",[t._v("講師側が説明で用いるソースコード（答え）は、"),a("code",[t._v("/go/src/samples/<セクション名>/<プログラム名>/***.go")]),t._v(" の形で格納してあります。"),a("br"),t._v("\n講師側が想定している出力結果を確認したい際は、"),a("code",[t._v("/go/src/samples/")]),t._v("配下を実行することで、容易に確認できます。"),a("br"),t._v("\nまた、ハンズオンがうまく行かない際には、以下のように差分を確認することで、課題解決を助ける可能性があります。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("diff")]),t._v(" /go/src/go_tutorial/"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("セクション名"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("プログラム名"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/***.go /go/src/samples/"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("セクション名"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("プログラム名"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/***.go\n")])])]),a("h1",{attrs:{id:"_2-hello-world-10-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-hello-world-10-min"}},[t._v("#")]),t._v(" 2. Hello, World ( 10 min )")]),t._v(" "),a("p",[t._v("本章では、Go言語の実行方法とコンパイル方法を確認します。")]),t._v(" "),a("h2",{attrs:{id:"_2-1-goの実行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-goの実行"}},[t._v("#")]),t._v(" 2.1. Goの実行")]),t._v(" "),a("h3",{attrs:{id:"_2-1-1-goを動かす"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-goを動かす"}},[t._v("#")]),t._v(" 2.1.1. Goを動かす")]),t._v(" "),a("p",[t._v("Go言語で作成されたソースコードの実行方法は2つあります。"),a("br"),t._v("\nソースコードをコンパイル（"),a("code",[t._v("go build")]),t._v("）し、実行形式ファイル（.exe等）を実行する方法と、"),a("br"),t._v("\nソースコードをスクリプト言語のように実行する"),a("code",[t._v("go run")]),t._v("コマンドを用いる方法です。")]),t._v(" "),a("h4",{attrs:{id:"_2-1-1-1-以下のコマンドを実行して、goを動かしてみよう"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-1-以下のコマンドを実行して、goを動かしてみよう"}},[t._v("#")]),t._v(" 💻 2.1.1.1. 以下のコマンドを実行して、Goを動かしてみよう")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/2_helloworld/hello/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" main.go\n$ go run main.go\n")])])]),a("ul",[a("li",[t._v("/go/src/go_tutorial/2_helloworld/hello/main.go"),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, W0rld!!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 2.1.1.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n$ go run main.go\nHello, W0rld"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),a("h4",{attrs:{id:"_2-1-1-2-以下のコマンドを実行して、goをコンパイルしてみよう。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-2-以下のコマンドを実行して、goをコンパイルしてみよう。"}},[t._v("#")]),t._v(" 💻 2.1.1.2. 以下のコマンドを実行して、Goをコンパイルしてみよう。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/2_helloworld/hello/")]),t._v("\n$ go build main.go\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" ./main\n$ ./main\n")])])]),a("p",[t._v("♻️ 2.1.1.2. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/2_helloworld/hello/")]),t._v("\n$ go build main.go\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\nmain  main.go\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" ./main\nmain: ELF "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("64")]),t._v("-bit LSB executable, x86-64, version "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("SYSV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", statically linked, Go "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("BuildID")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("h4I-IJqcIkOGZEY8aOXG/Oavgb_mM-7UzeuwNWOCx/iNm526Mrqo9Tb59n0e8A/SZ9SbxL4eRIc7JGiMfDO, not stripped\n$ ./main\nHello, W0rld"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),a("p",[t._v("おめでとうございます。これで、あなたもGopherの友達です。"),a("br"),t._v("\n記念にぬいぐるみのGopherを机に飾っても良いでしょう。")]),t._v(" "),a("h2",{attrs:{id:"_2-2-クロスコンパイルの体験"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-クロスコンパイルの体験"}},[t._v("#")]),t._v(" 2.2. クロスコンパイルの体験")]),t._v(" "),a("p",[t._v("きっと便利ツールを作ってお手元のWindowsで動かしたくなることもあるでしょう。"),a("br"),t._v(" "),a("a",{attrs:{href:"#113-%E3%82%AF%E3%83%AD%E3%82%B9%E3%82%B3%E3%83%B3%E3%83%91%E3%82%A4%E3%83%AB%E3%81%8C%E5%AE%B9%E6%98%93"}},[t._v("1.1.3. クロスコンパイルが容易")]),t._v(" でも触れた通り、簡単に作成できることを確認してもらいます。")]),t._v(" "),a("h3",{attrs:{id:"_2-2-1-以下のコマンドを実行して、goをコンパイルしてみましょう。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-以下のコマンドを実行して、goをコンパイルしてみましょう。"}},[t._v("#")]),t._v(" 💻 2.2.1. 以下のコマンドを実行して、Goをコンパイルしてみましょう。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/2_helloworld/hello/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("windows "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOARCH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("amd64 go build main.go\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" ./main.exe\n")])])]),a("p",[t._v("♻️ 2.2.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/2_helloworld/hello/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("windows "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOARCH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("amd64 go build main.go\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\nmain main.exe main.go\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" ./main.exe\nmain.exe: PE32+ executable "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" x86-64 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("stripped to external PDB"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" MS Windows\n")])])]),a("h5",{attrs:{id:"tips-クロスコンパイル先の対象一覧"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips-クロスコンパイル先の対象一覧"}},[t._v("#")]),t._v(" Tips: クロスコンパイル先の対象一覧")]),t._v(" "),a("p",[t._v("クロスコンパイル時に指定する環境変数("),a("code",[t._v("GOOS")]),t._v(", "),a("code",[t._v("GOARCH")]),t._v(")へ指定できる値は、"),a("code",[t._v("go tool dist list")]),t._v(" というコマンドで確認できます。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ go tool dist list\naix/ppc64\nandroid/386\nandroid/amd64\nandroid/arm\nandroid/arm64\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#...省略")]),t._v("\n")])])]),a("h1",{attrs:{id:"_3-変数の定義方法確認-10-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-変数の定義方法確認-10-min"}},[t._v("#")]),t._v(" 3. 変数の定義方法確認 ( 10 min )")]),t._v(" "),a("p",[t._v("本章では、変数の定義方法の確認と、変数定義に失敗しているソースコードを修正してもらいます。")]),t._v(" "),a("h2",{attrs:{id:"_3-1-変数定義方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-変数定義方法"}},[t._v("#")]),t._v(" 3.1. 変数定義方法")]),t._v(" "),a("p",[t._v("Go言語では、変数の定義記法が3つあります。")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("var <変数名> <型>")]),t._v(" "),a("ul",[a("li",[t._v("例: "),a("code",[t._v("var Hensu string")])]),t._v(" "),a("li",[t._v("型指定有り。変数初期値の指定無し(stringなので、"),a("code",[t._v('""')]),t._v("になります。)")])])]),t._v(" "),a("li",[a("code",[t._v("<変数名> := <初期値>")]),t._v(" "),a("ul",[a("li",[t._v("例: "),a("code",[t._v('Hensu := "myValue"')])]),t._v(" "),a("li",[t._v("型指定無し。代入元の型を引き継ぐ")])])]),t._v(" "),a("li",[a("code",[t._v("var <変数名> <型> = <初期値>")]),t._v(" "),a("ul",[a("li",[t._v("例: "),a("code",[t._v('var Hensu string = "myValue"')])]),t._v(" "),a("li",[t._v("型指定有り。変数初期値の指定有り")])])])]),t._v(" "),a("p",[t._v("予期せぬ型が変数に定義されないよう、最初のうち（書いている型をイメージできるまで）は、1か3の書き方をお勧めします。"),a("br"),t._v("\n予期せぬ型が変数に定義されうる例として、"),a("code",[t._v("interface型")]),t._v(" というものが存在します。"),a("br"),t._v("\n本講義では、"),a("code",[t._v("interface型")]),t._v(" は扱わない為、説明は割愛しますが、使い方として、"),a("code",[t._v("なんでも型")]),t._v(" のような使い方ができます。"),a("br"),t._v("\n変数"),a("code",[t._v("なんでも型")]),t._v("が示しているのは、int型だと思っていたらstring型だった。というようなケースもおきえるので、注意が必要です。"),a("br"),t._v("\n🚀 同一PublicMethodを保有する、異なる型のポインタを同じ変数として扱うポインタ変数領域のようなものです。同一PublicMethodをAny指定することで、なんでも渡せるポインタ領域を作成できます。")]),t._v(" "),a("h5",{attrs:{id:"tips-privateとpublicの指定方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips-privateとpublicの指定方法"}},[t._v("#")]),t._v(" 🚀 Tips: privateとPublicの指定方法")]),t._v(" "),a("p",[t._v("Go言語の名前空間は、"),a("code",[t._v("private")]),t._v("は先頭小文字。"),a("code",[t._v("Public")]),t._v("が先頭大文字と決まっています。"),a("br"),t._v("\npackageに含める要素（変数や関数、構造体や構造体の要素など）をpackageの外部から参照させたい場合、先頭大文字の変数名とするようご注意ください。")]),t._v(" "),a("h2",{attrs:{id:"_3-2-不具合箇所は、最高の講師に教えてもらおう"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-不具合箇所は、最高の講師に教えてもらおう"}},[t._v("#")]),t._v(" 3.2. 不具合箇所は、最高の講師に教えてもらおう")]),t._v(" "),a("p",[t._v("Go言語では、書き方を間違えているととても丁寧に教えてくれる強い味方がいます。"),a("br"),t._v("\nそれは、コンパイラ（"),a("code",[t._v("go build")]),t._v("）です。"),a("br"),t._v("\n「うーん、あ、この辺のソースみた？」とだけ返してくる先輩に比べ、「3行目、6文字目。変数定義されていないよ！？」と場所まで指定して教えてくれます。"),a("br"),t._v("\n変数定義方法で、1や3を勧めた理由の1つとして、型が異なる場合にコンパイラに教えてもらえる可能性が高まるためというのもあります。")]),t._v(" "),a("p",[t._v("ちょっと厳しい点があるとすれば、指摘が英語な点でしょうか。"),a("br"),t._v("\n中学生レベルの英語と、単語を調べる力があれば解決できる文章しか出てこないので、ぜひ"),a("code",[t._v("go build")]),t._v("大先生に弟子入りしてみてください。")]),t._v(" "),a("h5",{attrs:{id:"tips-一度に教えてくれる量は限りがある"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips-一度に教えてくれる量は限りがある"}},[t._v("#")]),t._v(" Tips: 一度に教えてくれる量は限りがある")]),t._v(" "),a("p",[t._v("エラーが多いと、数個のエラーの後に"),a("code",[t._v("too many error....")]),t._v("と続き、全てのエラーを教えてくれないことがあります。"),a("br"),t._v("\nしょうがないので、教えてもらっているエラーから対処していきましょう。")]),t._v(" "),a("h3",{attrs:{id:"_3-2-1-以下のコマンドを実行して、修正箇所を認識てみよう。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-1-以下のコマンドを実行して、修正箇所を認識てみよう。"}},[t._v("#")]),t._v(" 💻 3.2.1. 以下のコマンドを実行して、修正箇所を認識てみよう。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/3_var/plzfixme/")]),t._v("\n$ go run main.go\n")])])]),a("p",[t._v("♻️ 3.2.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/3_var/plzfixme/")]),t._v("\n$ go run main.go\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# command-line-arguments")]),t._v("\n./main.go:6:2: undefined: WatashiNoHensu\n./main.go:7:14: undefined: WatashiNoHensu\n")])])]),a("h2",{attrs:{id:"_3-3-不具合の修正"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-不具合の修正"}},[t._v("#")]),t._v(" 3.3. 不具合の修正")]),t._v(" "),a("h3",{attrs:{id:"_3-3-1-ソースコードを修正し、エラーを無くしてみよう。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-1-ソースコードを修正し、エラーを無くしてみよう。"}},[t._v("#")]),t._v(" 💻 3.3.1. ソースコードを修正し、エラーを無くしてみよう。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/3_var/plzfixme/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" main.go\n$ go run main.go\n")])])]),a("ul",[a("li",[a("code",[t._v("/go/src/go_tutorial/3_var/plzfixme/main.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tWatashi_no_Hensu "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GYUDON"')]),t._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//./main.go:6:2: undefined: Watashi_no_Hensu")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Watashi_no_Hensu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//./main.go:7:14: undefined: Watashi_no_Hensu")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 3.3.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/3_var/plzfixme/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" main.go\n$ go run main.go\nGYUDON\n")])])]),a("h3",{attrs:{id:"_3-3-2-変数定義方法が3種類を全て試してみよう。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-2-変数定義方法が3種類を全て試してみよう。"}},[t._v("#")]),t._v(" 🚀 💻 3.3.2. 変数定義方法が3種類を全て試してみよう。")]),t._v(" "),a("h1",{attrs:{id:"_4-関数-10-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-関数-10-min"}},[t._v("#")]),t._v(" 4. 関数 ( 10 min )")]),t._v(" "),a("p",[t._v("本章では、関数の定義方法と、Goっぽい関数の扱われ方について、確認してもらいます。")]),t._v(" "),a("h2",{attrs:{id:"_4-1-関数の定義"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-関数の定義"}},[t._v("#")]),t._v(" 4.1. 関数の定義")]),t._v(" "),a("p",[t._v("Go言語では、"),a("code",[t._v("func")]),t._v("から始まる形で、関数を定義できます。フォーマットは以下の通りです")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("関数名"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("引数"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("引数"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("戻り値"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("戻り値"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("処理"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("このフォーマットをみてわかる通り、Go言語では、複数の戻り値を指定できます。")]),t._v(" "),a("p",[t._v("なお、引数、戻り値がない場合は、省略可能なため、最も短い関数の定義は、以下のようになります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("処理"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("引数がいくつか存在し、戻り値が1つだけの場合は、以下のようになります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" find "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("処理"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" find\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("また、戻り値が複数になると、戻り値の型をかっこで囲む必要があります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" find "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("処理"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("関数の基本的な定義方法は以上です。")]),t._v(" "),a("h5",{attrs:{id:"変数名を戻り値の定義で、合わせて定義する方法もあります。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#変数名を戻り値の定義で、合わせて定義する方法もあります。"}},[t._v("#")]),t._v(" 🚀 変数名を戻り値の定義で、合わせて定義する方法もあります。")]),t._v(" "),a("p",[t._v("変数の名前スコープが、関数内全体のスコープになり、認識すべき範囲が広がるため、執筆者は、あまり扱いません。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" age "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("uint")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("find "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("処理"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" find"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" result\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-2-関数を書いてみる"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-関数を書いてみる"}},[t._v("#")]),t._v(" 4.2. 関数を書いてみる")]),t._v(" "),a("p",[t._v("第3章で、修正したソースコードを更新してもらいます。"),a("br"),t._v("\n作成する関数は、渡された牛丼名を食べる関数です。"),a("br"),t._v("\n本講義で行えることは限られるので、行為を以下のように定義します。")]),t._v(" "),a("ul",[a("li",[t._v("空白以外の文字列を全て牛丼名とみなす")]),t._v(" "),a("li",[t._v("食べる行為は、標準出力とする\n"),a("ul",[a("li",[t._v("本章では、"),a("code",[t._v("fmt.Println")]),t._v(" を用いて、文字列を出力します")])])]),t._v(" "),a("li",[t._v("食べた場合は、"),a("code",[t._v("true")]),t._v(", 食べたい無い場合は、"),a("code",[t._v("false")]),t._v("を返す")])]),t._v(" "),a("h2",{attrs:{id:"_4-2-0-if構文"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-0-if構文"}},[t._v("#")]),t._v(" 4.2.0. if構文")]),t._v(" "),a("p",[t._v("本章のハンズオンでは、上述した定義を表すために、条件分岐が必要となります。"),a("br"),t._v("\n条件分岐を表すための、Go言語によるif構文の書き方を先に紹介します。")]),t._v(" "),a("p",[t._v("基本的なif構文は、以下の通りです。"),a("br"),t._v("\n本講義では割愛しますが、"),a("code",[t._v("else if")]),t._v("や、"),a("code",[t._v("else")]),t._v("を続ける表現もあります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("条件"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("処理"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("具体例は、以下のような表現となります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" val1 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" val2 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"a"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" val1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" val2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"True!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("この例では、"),a("code",[t._v("val1 == val2")]),t._v(" が条件式となり、bool値（"),a("code",[t._v("True")]),t._v(" or "),a("code",[t._v("False")]),t._v(") を返却。それを元にifで条件分岐する流れを表しています。")]),t._v(" "),a("p",[t._v("この他に、Go言語では、ifの中で関数の戻り値を変数に代入し、変数を条件の要素とする書き方もあります。"),a("br"),t._v("\n構文は以下のようになります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("判定要変数"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("関数"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("条件"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("判定式 "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("処理"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("具体例は、以下のような表現となります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" res "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("myTest")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("res "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"False"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("code",[t._v("myTest()")]),t._v("が、bool値("),a("code",[t._v("True")]),t._v(" or "),a("code",[t._v("False")]),t._v(") を返却し、resへ代入します。そして、"),a("code",[t._v(";")]),t._v("の後に続く条件式("),a("code",[t._v("!res")]),t._v(")の結果に応じて条件分岐します。")]),t._v(" "),a("h2",{attrs:{id:"_4-2-1-関数のコーディングを行う"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-1-関数のコーディングを行う"}},[t._v("#")]),t._v(" 4.2.1. 💻 関数のコーディングを行う")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/4_funcy/monkey/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eaters.go\n$ go run eaters.go\n")])])]),a("ul",[a("li",[a("code",[t._v("/go/src/go_tutorial/4_funcy/monkey/eaters.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("nameが空白か比較する"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("nameが空白以外ならば、"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`fmt.Println(name)`")]),t._v("を実行し、"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`return true`")]),t._v("を行う"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("nameが空白ならば、"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`return false`")]),t._v("を行う"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name1 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GYUDON"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" ok "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ok "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cannt eat: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name2 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" ok "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ok "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cannt eat: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 4.2.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/4_funcy/monkey/")]),t._v("\n$ go run eaters.go\nGYUDON\ncannt eat: \n")])])]),a("p",[t._v("さて、既にお気づきの方もいると思いますが、"),a("code",[t._v("if ok := Eat(name1); !ok {")]),t._v(" などの表現は、冗長です。")]),t._v(" "),a("p",[t._v("変数に代入せず、"),a("code",[t._v("if !Eat(name1) {")]),t._v(" というような表現であっても動作します。"),a("br"),t._v("\nこちらの表現の方が、シンプルです。可読性や処理の観点からも良さそうです。")]),t._v(" "),a("p",[t._v("しかし、Goっぽい関数を扱う場合に、シンプルな表現は、活用できないケースがあります。")]),t._v(" "),a("h3",{attrs:{id:"_4-2-2-goっぽい関数の書き方と、使い方"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-goっぽい関数の書き方と、使い方"}},[t._v("#")]),t._v(" 4.2.2. Goっぽい関数の書き方と、使い方")]),t._v(" "),a("p",[t._v("Go言語の関数は、戻り値を複数返せる特徴を持っています。")]),t._v(" "),a("p",[t._v("この特徴を活用した、よく使われる表現として、関数の実行内容と、処理結果それぞれを戻り値で返却するというものが挙げられます。"),a("br"),t._v("\n例えば、以下のような関数です。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Writer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n")])])]),a("p",[t._v("この例では、第一戻り値に、書き込んだ文字数を返し、"),a("br"),t._v("\n第二戻り値に、問題なく書き込めたかどうかを判定するbool値を返却しています。")]),t._v(" "),a("p",[t._v("この関数"),a("code",[t._v("Writer()")]),t._v("は、複数の戻り値を持つため、ifに、bool値だけを渡すことができません。"),a("br"),t._v("\nその為、この関数のbool値だけを用いて条件分岐を行う場合には、"),a("br"),t._v("\n第一戻り値を捨て、第二戻り値だけを変数へ代入するというような記法が必要となります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ok "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Writer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("ok "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cannot write"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("（任意の戻り値を捨てるには、"),a("code",[t._v("_")]),t._v("へ代入します。全て捨てる場合は、代入自体が不要です。）")]),t._v(" "),a("p",[t._v("今回は、説明の例として、boolによる成功可否の判定を挙げましたが、"),a("br"),t._v("\nGo言語では、エラー状態を格納できるerror型を用いることが多くあります。")]),t._v(" "),a("p",[t._v("なお、error型は、ifがbool型を渡されたように判定することはできません。"),a("br"),t._v("\nそのため、error型の空の状態（"),a("code",[t._v("nil")]),t._v("）をエラーではない状態として、それと比較することで条件分岐を行う書き方が多く扱われています。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Writer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Writer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cannot write"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_4-2-2-1-goっぽい関数を実行してみる"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-1-goっぽい関数を実行してみる"}},[t._v("#")]),t._v(" 4.2.2.1. 💻 Goっぽい関数を実行してみる")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPY /go/src/go_tutorial/4_funcy/monkey/eaters.go /go/src/go_tutorial/4_funcy/likego/eaters.go")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/4_funcy/likego/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eaters.go\n$ go run eaters.go\n")])])]),a("ul",[a("li",[a("code",[t._v("/go/src/go_tutorial/4_funcy/likego/eaters.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name is empty."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name1 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GYUDON"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cannt eat: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name2 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cannt eat: "')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 4.2.2.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/4_funcy/likego/")]),t._v("\n$ go run eaters.go\nGYUDON\ncannot eat: name is empty.\n")])])]),a("h4",{attrs:{id:"_4-2-2-2-変数スコープの注意事項"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-2-2-変数スコープの注意事項"}},[t._v("#")]),t._v(" 4.2.2.2. 🚀 変数スコープの注意事項")]),t._v(" "),a("p",[t._v("戻り値の変数を後ほど活用する場合は、スコープに注意してください。"),a("br"),t._v("\n例えば、ファイル読み込みなどで、("),a("code",[t._v("読み込んだ文字列")]),t._v(", "),a("code",[t._v("error")]),t._v(") のペアが戻り値となるケースです。"),a("br"),t._v("\n例1では、第一戻り値が、ifのスコープ内となり、後続処理で活用できません。"),a("br"),t._v("\n例2のように、ifの手前で一度変数を定義する必要があります。")]),t._v(" "),a("ul",[a("li",[t._v("例1"),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FileReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file_path "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fpath "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c:\\mydata\\data.txt"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" body"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FileReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ここでは body がスコープ外")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("例2"),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FileReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file_path "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" fpath "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c:\\mydata\\data.txt"')]),t._v("\n\tbody"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("FileReader")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fpath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("panic")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// body がスコープ内（で、扱える）")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"_4-3-関数の実行される順番"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-関数の実行される順番"}},[t._v("#")]),t._v(" 4.3. 関数の実行される順番")]),t._v(" "),a("p",[t._v("Go言語では、"),a("code",[t._v("func main(){}")]),t._v(" が、実行されます。"),a("br"),t._v("\nそのため、仮に以下のようなソースコードを実行すると、"),a("code",[t._v("runtime.main_main·f: function main is undeclared in the main package")]),t._v(" と、main関数が見つからないエラーが表示されます。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("MySuperFunction")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GYUDON"')]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h5",{attrs:{id:"init関数"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#init関数"}},[t._v("#")]),t._v(" 🚀 "),a("code",[t._v("init")]),t._v("関数")]),t._v(" "),a("p",[a("code",[t._v("func main(){}")]),t._v(" よりも先に実行される、"),a("code",[t._v("func init(){}")]),t._v(" という関数があります。"),a("br"),t._v("\n後ほど触れるパッケージで、初期化処理を行いたいケースなどで活用できます。")]),t._v(" "),a("h1",{attrs:{id:"_5-パッケージ-10-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-パッケージ-10-min"}},[t._v("#")]),t._v(" 5. パッケージ ( 10 min )")]),t._v(" "),a("p",[t._v("本章では、パッケージの参照方法と、実際にパッケージの作成を試してもらいます。")]),t._v(" "),a("h2",{attrs:{id:"_5-1-パッケージを使う"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-パッケージを使う"}},[t._v("#")]),t._v(" 5.1. パッケージを使う")]),t._v(" "),a("p",[t._v("実は既に、何度も登場している、"),a("code",[t._v("import fmt")]),t._v(" が、パッケージ名fmtを使います。という表現です。"),a("br"),t._v(" "),a("code",[t._v("import <パッケージ名>")]),t._v(" を増やすことで、他のパッケージを活用できます。"),a("br"),t._v("\n複数のパッケージのimportでは、以下のように"),a("code",[t._v("()")]),t._v("でまとめることで、より文字数の少ない書き方もできます。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"os"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h2",{attrs:{id:"_5-1-1-4章のソースコードを直す"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-1-4章のソースコードを直す"}},[t._v("#")]),t._v(" 5.1.1. 💻 4章のソースコードを直す")]),t._v(" "),a("p",[t._v("4章で作成したソースコードには、修正すべき問題があります。"),a("br"),t._v("\nそれは、エラー時の出力先と、正常時の出力先が同じstdoutであることです。")]),t._v(" "),a("p",[a("code",[t._v("fmt")]),t._v("に含まれる、"),a("code",[t._v("Print")]),t._v("関係の関数には、出力先を指定できるものが存在します。"),a("br"),t._v("\n出力先を指定できる関数を用い、エラー出力をstderrに出力するよう修正してもらいます。"),a("br"),t._v("\n実行時は、stdoutを捨てる("),a("code",[t._v("> /dev/null")]),t._v(")すると、差分がわかることでしょう。")]),t._v(" "),a("p",[t._v("なお、Go言語のstderr定数は、"),a("code",[t._v("os")]),t._v("パッケージの、"),a("code",[t._v("os.Stderr")]),t._v("として存在するため、追加で、"),a("code",[t._v("os")]),t._v("パッケージのインポートください。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/5_package/fixFunckyMonkey/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eaters.go\n$ go run eaters.go\n$ go run eaters.go "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /dev/null\n")])])]),a("ul",[a("li",[a("code",[t._v("/go/src/go_tutorial/5_package/fixFunckyMonkey/eaters.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"os"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//追加")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name is empty."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name1 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GYUDON"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Stderr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"cannot eat: '%s'\\n\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//更新")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name2 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Stderr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"cannot eat: '%s'\\n\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//更新")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 5.1.1 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/5_package/fixFunckyMonkey/")]),t._v("\n$ go run eaters.go\nGYUDON\ncannot eat: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name is empty.'")]),t._v("\n$ go run eaters.go "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /dev/null\ncannot eat: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name is empty.'")]),t._v("\n")])])]),a("h2",{attrs:{id:"_5-2-パッケージを作る"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-パッケージを作る"}},[t._v("#")]),t._v(" 5.2. パッケージを作る")]),t._v(" "),a("p",[t._v("実は既に、mainパッケージを何度も作成しています。"),a("br"),t._v("\n1行目に書いている"),a("code",[t._v("package main")]),t._v(" です。"),a("br"),t._v(" "),a("code",[t._v("package <パッケージ名>")]),t._v("と、先頭に書くことで、パッケージ名を定義できます。"),a("br"),t._v(" "),a("code",[t._v("package main")]),t._v("は、それを起点として実行できる決められたパッケージ名です。"),a("br"),t._v("\n今回は、main以外の任意の名前が指定可能な、起点から呼び出されるパッケージを作成してもらいます。")]),t._v(" "),a("h3",{attrs:{id:"_5-2-1-関数eatのshopパッケージ化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-関数eatのshopパッケージ化"}},[t._v("#")]),t._v(" 5.2.1. 💻 関数Eatのshopパッケージ化")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPY /go/src/go_tutorial/5_package/fixFunckyMonkey/eaters.go /go/src/go_tutorial/5_package/notKinkyuJi/eaters.go")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/5_package/notKinkyuJi/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" shop/shop.go\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eaters.go\n$ go run eaters.go\n")])])]),a("ul",[a("li",[a("code",[t._v("/go/src/go_tutorial/5_package/notKinkyuJi/shop/shop.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" shop\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name is empty."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("code",[t._v("/go/src/go_tutorial/5_package/notKinkyuJi/eaters.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"os"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./shop"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name1 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"GYUDON"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" shop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Stderr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"cannot eat: '%s'\\n\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//更新")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" name2 "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" shop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("name2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Stderr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"cannot eat: '%s'\\n\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//更新")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 5.2.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/5_package/notKinkyuJi/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" shop/shop.go\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eaters.go\n$ go run eaters.go\nGYUDON\ncannot eat: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'name is empty.'")]),t._v("\n")])])]),a("h5",{attrs:{id:"真のパッケージ化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#真のパッケージ化"}},[t._v("#")]),t._v(" 🚀 真のパッケージ化")]),t._v(" "),a("p",[t._v("本章の課題では、"),a("code",[t._v('import "./shop"')]),t._v("のような、相対Pathによるimportを行っています。"),a("br"),t._v("\n相対Pathによるimportは推奨されず、コンパイルエラーとなります。"),a("br"),t._v("\n本講義では、"),a("code",[t._v("go mod")]),t._v("の説明を割愛するため、対象エラーを無効化できる環境変数"),a("code",[t._v("GO111MODULE=off")]),t._v("を指定しています。"),a("br"),t._v("\n使えるmoduleを作成する場合は、"),a("a",{attrs:{href:"https://golang.org/doc/tutorial/create-module",target:"_blank",rel:"noopener noreferrer"}},[t._v("Module作成方法"),a("OutboundLink")],1),t._v("や、"),a("a",{attrs:{href:"https://golang.org/doc/tutorial/call-module-code",target:"_blank",rel:"noopener noreferrer"}},[t._v("その他のModuleの呼び方"),a("OutboundLink")],1),t._v("を参考に、"),a("code",[t._v("go mod")]),t._v("に沿ったパッケージ化が推奨されます。")]),t._v(" "),a("h1",{attrs:{id:"_6-構造体-15-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-構造体-15-min"}},[t._v("#")]),t._v(" 6. 構造体 ( 15 min )")]),t._v(" "),a("p",[t._v("本章では、構造体の定義方法と、構造体に関係付ける関数（メソッド）の作成方法について、確認してもらいます。")]),t._v(" "),a("h2",{attrs:{id:"_6-1-0-構造体とは"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-0-構造体とは"}},[t._v("#")]),t._v(" 6.1.0. 構造体とは")]),t._v(" "),a("p",[t._v("構造体は、任意の定義ずみの型を0個以上まとめることが可能な型です。"),a("br"),t._v("\n例えば、既存の型では収められる量が不足する際に扱います。"),a("br"),t._v("\nint64では、最大約923京("),a("code",[t._v("9,223,372,036,854,775,807")]),t._v(") の京の桁(10^16)まで表せますが、1那由多(10^60)は、表すことができません。"),a("br"),t._v("\nint64をいくつか組み合わせ、このint64は、1の位から。このint64は、垓（がい）の位から。と役割を決めていくことで、1那由多以上を表せる型を定義できます。")]),t._v(" "),a("h2",{attrs:{id:"_6-1-構造体の定義"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-構造体の定義"}},[t._v("#")]),t._v(" 6.1. 構造体の定義")]),t._v(" "),a("p",[t._v("Go言語では、"),a("code",[t._v("type")]),t._v("から始まる形で、名前付きの型を定義できます。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("型"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("構造体の定義は、型部分に、予約された表現である、"),a("code",[t._v("struct {}")]),t._v("を用い定義します。"),a("br"),t._v("\n(変数に直接代入する構造体の定義方法もありますが、本講義ではふれません。)")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("名称"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("名前"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("型"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//要素1")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("名前"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("型"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//要素2")]),t._v("\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("例えば、"),a("a",{attrs:{href:""}},[t._v("6.1.0 構造体とは")]),t._v(" で例に挙げたint64では桁数が不足する際の構造体をGo言語で記述すると、以下のようになります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" FantasticInt "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tichi_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("\n\tgai_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n")])])]),a("p",[t._v("構造体を変数として定義する場合は、intなどの標準型と同様、以下のように定義できます。"),a("br"),t._v("\n要素にアクセスする際は、"),a("code",[t._v("<変数>.<要素の名前>")]),t._v(" と指定します。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" MyInt FantasticInt\n\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("MyInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_6-2-構造体への関数の関連付け"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-構造体への関数の関連付け"}},[t._v("#")]),t._v(" 6.2. 構造体への関数の関連付け")]),t._v(" "),a("p",[t._v("先ほど例に挙げた"),a("code",[t._v("type FantasticInt")]),t._v("は、"),a("code",[t._v("+-*/")]),t._v(" を用いて計算ができません。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" FantasticInt "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tichi_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("\n\tgai_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num1 FantasticInt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" FantasticInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ichi_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gai_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num2 FantasticInt "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" FantasticInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ichi_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" gai_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" #"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("これは、コーダが独自に定義した型をどのように計算するかGo言語に定義されていない為におきます。"),a("br"),t._v("\n残念ながら"),a("code",[t._v("+-*/")]),t._v("を活用した計算はできませんが、処理を定義することで計算は可能となります。"),a("br"),t._v("\n独自の型へ独自の処理を定義する方法は、3つあります。")]),t._v(" "),a("h3",{attrs:{id:"_6-2-1-型を利用するスコープ上に、そのまま処理を書く"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-1-型を利用するスコープ上に、そのまま処理を書く"}},[t._v("#")]),t._v(" 6.2.1. 型を利用するスコープ上に、そのまま処理を書く")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num1 FantasticInt\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num2 FantasticInt\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ichi_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" gai_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ichi_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("gai_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_6-2-2-型を引数として利用できる関数を定義する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-2-型を引数として利用できる関数を定義する"}},[t._v("#")]),t._v(" 6.2.2. 型を引数として利用できる関数を定義する")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num1 FantasticInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num2 FantasticInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" FantasticInt "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" ichi_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" gai_no_keta "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" num1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" FantasticInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tichi_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ichi_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tgai_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" gai_no_keta"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num1 FantasticInt\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num2 FantasticInt\n\tnum3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" num2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n")])])]),a("h3",{attrs:{id:"_6-2-3-型をレシーバ引数として関数と関連付けする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-3-型をレシーバ引数として関数と関連付けする"}},[t._v("#")]),t._v(" 6.2.3. 型をレシーバ引数として関数と関連付けする")]),t._v(" "),a("p",[t._v("型に関数を紐付け、"),a("code",[t._v("変数.関数()")]),t._v("の形で呼び出す方法です。レシーバ引数で紐付けを行っている関数を、メソッドとも呼びます。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("レシーバ引数変数名 レシーバ引数型"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("関数名"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("引数"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("引数"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("戻り値"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("戻り値"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n")])])]),a("p",[a("code",[t._v("FantasticInt")]),t._v("へ、数字を追加する、足し算メソッドを用意する場合は、以下のようになります。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("FantasticInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num FantasticInt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ichi_no_keta\n\tself"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" num"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gai_no_keta\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num1 FantasticInt\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" num2 FantasticInt\n\n\tnum1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("num1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("先程紹介した2つでは、"),a("strong",[t._v("AとBを足し、Cという新しい領域を作成")]),t._v("しています。"),a("br"),t._v("\n今回の記法では、"),a("strong",[t._v("AにBに加える")]),t._v(" というような、レシーバ引数となった実体へ影響を与えるような書き方をしています。"),a("br"),t._v("\nどちらの表現でも処理自体は行えますが、処理の効率や可読性の観点から、どちらを選ぶか判断が必要です。")]),t._v(" "),a("p",[t._v("🚀 レシーバ引数で、実体に影響を与えるためには。"),a("br"),t._v("\n本講義で詳細は触れませんが、実体に影響を与えるためには、リファレンス参照（ポインタのようなもの）が必要です。"),a("br"),t._v("\n引数を定義する際の"),a("code",[t._v("<変数> <型>")]),t._v(" を、"),a("code",[t._v("<変数> *<型>")]),t._v(" のようにアスタリスクをつけることでリファレンス参照となります。")]),t._v(" "),a("h5",{attrs:{id:"tips-go言語には、-math-big-があります"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips-go言語には、-math-big-があります"}},[t._v("#")]),t._v(' Tips: Go言語には、"math/big" があります')]),t._v(" "),a("p",[t._v("int64では扱えないサイズを例に挙げ、本資料では独自の方を定義していますが、"),a("br"),t._v("\nGo言語標準パッケージに、int64よりも大きいサイズを扱える、"),a("a",{attrs:{href:"https://golang.org/pkg/math/big/",target:"_blank",rel:"noopener noreferrer"}},[t._v("math/big"),a("OutboundLink")],1),t._v("パッケージが存在します。")]),t._v(" "),a("h2",{attrs:{id:"_6-3-牛丼屋型と、注文する関数を定義する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-牛丼屋型と、注文する関数を定義する"}},[t._v("#")]),t._v(" 6.3. 牛丼屋型と、注文する関数を定義する")]),t._v(" "),a("p",[t._v("先ほども紹介した通り、構造体("),a("code",[t._v("struct")]),t._v(") は、"),a("code",[t._v("任意の定義ずみの型を0個以上まとめることが可能な型")]),t._v("なため、数字桁を扱うグルーピング以外にも活用できます。"),a("br"),t._v("\n牛丼屋で考えてみます。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" GYUDONYA "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\treji_1  TypeOfCashRegister\n\treji_2  TypeOfCashRegister\n\n\tseki_1  TypeOfChair\n\tseki_2  TypeOfChair\n\tseki_3  TypeOfChair\n\n\tchubo_1 TypeOfKitchen\n\n\tmenu    "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n\n\tZipCode "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),t._v("\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n")])])]),a("p",[t._v("レジや席がいくつか存在し、厨房やメニューがあることでしょう。あとは、所在の郵便番号(ZipCode)。他にも、電話番号や社員の一覧など、構成要素はまだまだありそうです。"),a("br"),t._v("\n牛丼屋を完璧にシミュレーションするコードを作成したければ、もっと沢山の構成要素を意識する必要がありますが、牛丼屋を考える講義でも無く、執筆者が牛丼屋で働いたこともないので、もう少しシンプルな実習コードとします。")]),t._v(" "),a("h3",{attrs:{id:"_6-3-1-お店で食べられる牛丼屋型を実行する"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-1-お店で食べられる牛丼屋型を実行する"}},[t._v("#")]),t._v(" 6.3.1. 💻 お店で食べられる牛丼屋型を実行する")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPY /go/src/go_tutorial/5_package/notKinkyuJi/eaters.go /go/src/go_tutorial/6_struct/weakShop/eaters.go")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPY /go/src/go_tutorial/5_package/notKinkyuJi/shop/shop.go /go/src/go_tutorial/6_struct/weakShop/shop/shop.go")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/6_struct/weakShop/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" shop/shop.go\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" eaters.go\n$ go run eaters.go\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("/go/src/go_tutorial/6_struct/weakShop/shop/shop.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" shop\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Gyudon "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tmenu "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewGyudon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Gyudon "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//変数定義用の関数")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Gyudon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tmenu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NegitamaGyudon"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("Gyudon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("menu "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Errorf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name is empty."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\ttime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Second "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//擬似食べてる時間")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("code",[t._v("/go/src/go_tutorial/6_struct/weakShop/eaters.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"os"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./shop"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tmyshop "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" shop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewGyudon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("_")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" myshop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("os"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Stderr"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"cannot eat: '%s'\\n\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 6.3.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/6_struct/weakShop/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" shop/shop.go\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" gyudon-httpd.go\n$ go run eaters.go\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\nNegitamaGyudon\n")])])]),a("h1",{attrs:{id:"_7-webアプリケーション-15-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-webアプリケーション-15-min"}},[t._v("#")]),t._v(" 7. Webアプリケーション ( 15 min )")]),t._v(" "),a("p",[t._v("本章では、これまで順番に作り上げてきたGyudon型をWebアプリケーションサーバとして起動する方法を確認してもらいます。"),a("br"),t._v("\n本章までを通して、Go言語の基本的な扱い方を学習した皆さんには、最も簡単な章かもしれません。")]),t._v(" "),a("h2",{attrs:{id:"_7-0-準備"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-0-準備"}},[t._v("#")]),t._v(" 7.0. 準備")]),t._v(" "),a("p",[t._v("本章以降、複数のターミナルを用い、ハンズオンいただきます。"),a("br"),t._v("\n既存のコンテナに接続し利用するため、それぞれターミナルを起動し、以下コマンドを実行ください。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 1")]),t._v("\n$ docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it go-tutor /bin/bash\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 2")]),t._v("\n$ docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it go-tutor /bin/bash\n")])])]),a("h2",{attrs:{id:"_7-1-httpを起動する方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-1-httpを起動する方法"}},[t._v("#")]),t._v(" 7.1. httpを起動する方法")]),t._v(" "),a("p",[t._v("Go言語の標準パッケージ "),a("a",{attrs:{href:"https://golang.org/pkg/net/http/",target:"_blank",rel:"noopener noreferrer"}},[t._v("net/http"),a("OutboundLink")],1),t._v(" を活用するだけで起動します。"),a("br"),t._v("\n特に細かい処理に拘らず、デフォルト動作でWebアプリケーションサーバをコーディングするのであれば、呼び出す側は以下の2行だけですみます。")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("httphandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ResponseWriter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t#"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("省略\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\thttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("HandleFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" httphandler"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//どこのPathで、どんな処理をするか")]),t._v("\n\thttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListenAndServe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:8080"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//どの接続元(ホスト名:ポート)で、サーバを起動するか")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"_7-2-はじめてのgo言語webアプリケーション起動"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-2-はじめてのgo言語webアプリケーション起動"}},[t._v("#")]),t._v(" 7.2. はじめてのGo言語Webアプリケーション起動")]),t._v(" "),a("p",[t._v("では、Webアプリケーションサーバの書き方も知ってもらったので、実際にコーディングしてもらいましょう。"),a("br"),t._v("\n理由は後ほど説明しますが、本講義では、"),a("a",{attrs:{href:"https://golang.org/pkg/net/http/",target:"_blank",rel:"noopener noreferrer"}},[t._v("net/http"),a("OutboundLink")],1),t._v("パッケージではなく、講義用の下位互換httpパッケージ(zakohttp) を参照してもらいます。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPY /go/src/go_tutorial/6_struct/weakShop/shop/shop.go /go/src/go_tutorial/7_webapp/weakShop/shop/shop.go")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# COPY /go/src/go_tutorial/6_struct/weakShop/eaters.go /go/src/go_tutorial/7_webapp/weakShop/gyudon-httpd.go")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/7_webapp/weakShop/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" shop/shop.go\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" gyudon-httpd.go\n$ go run gyudon-httpd.go\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 1")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n")])])]),a("ul",[a("li",[a("code",[t._v("/go/src/go_tutorial/7_webapp/weakShop/shop/shop.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" shop\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"fmt"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"time"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"../http"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" Gyudon "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tmenu "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewGyudon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" Gyudon "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Gyudon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tmenu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"NegitamaGyudon"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("Gyudon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Eat")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ResponseWriter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Request"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//引数をhttpdのセッション状態を受け取れるように追加")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("menu "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\ttime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sleep")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("time"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Second "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//擬似食べてる時間")]),t._v("\n\tfmt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Fprintf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("w"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"'%s'\\n\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("menu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//食べた事を報告")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("code",[t._v("/go/src/go_tutorial/7_webapp/weakShop/gyudon-httpd.go")]),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" main\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./shop"')]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./http"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tmyshop "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" shop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("NewGyudon")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\thttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("HandleFunc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" myshop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Eat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\thttp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ListenAndServe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:8080"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("nil")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 7.2. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/7_webapp/weakShop/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" shop/shop.go\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" gyudon-httpd.go\n$ go run gyudon-httpd.go\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 1")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NegitamaGyudon'")]),t._v("\n")])])]),a("p",[t._v("💻 7.2. 後処理")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Ctrl + C で、gyudon-httpd.goをKillください")]),t._v("\n")])])]),a("h2",{attrs:{id:"_7-3-goroutineに触れる"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-goroutineに触れる"}},[t._v("#")]),t._v(" 7.3. Goroutineに触れる")]),t._v(" "),a("p",[t._v("Go言語の特徴でも述べた("),a("a",{attrs:{href:""}},[t._v("1.1.7. 並行プログラミングが文法レベルでサポートされている")]),t._v(")通り、Go言語では並行処理が簡単にかけます。"),a("br"),t._v("\n最後に、本講義で書いたWebアプリケーションサーバを用い、並行処理を体験してもらおうと思います。")]),t._v(" "),a("p",[t._v("突然ですが、座席が1つしかない牛丼屋に行かれたことはありますか？"),a("br"),t._v("\n執筆者は、大手牛丼チェーンの各社それなりに行きますが、今のところ座席が1つの店舗に巡り合ったことはありません。"),a("br"),t._v("\n平時の店舗で、1つの座席しか無いようでは、Aさんが食べ終わるまでBさんが牛丼を食べることができず、採算取れないからでしょうか。")]),t._v(" "),a("p",[t._v("ご存知の方も多いでしょうが、プログラムは、指定しない限り、処理を1つずつ順番に実行します。"),a("br"),t._v("\nそのため、1つの座席しか無い牛丼屋と同じ状況が起きます。"),a("br"),t._v("\n何も考えずに、HTTPサーバを開発すると、Aさんの画面が表示されるまで、Bさんの画面はずっと読み込み中でくるくる(待ち)になってしまいます。")]),t._v(" "),a("p",[t._v("めちゃくちゃ美味しい隠れた名店で、1席しか無いような状況であれば、執筆者は我慢できますが、"),a("br"),t._v("\nHTTPサーバで、他者の処理が終わらないと利用できないなんて、使えたものではありません。")]),t._v(" "),a("h3",{attrs:{id:"_7-3-1-1座席なwebアプリケーションサーバ体験"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-1-1座席なwebアプリケーションサーバ体験"}},[t._v("#")]),t._v(" 7.3.1. 💻 1座席なWebアプリケーションサーバ体験")]),t._v(" "),a("p",[t._v("試しに、2つのリクエストを送ると、1つ目のリクエストが10秒、2つ目のリクエストが約20秒かかることがわかると思います。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/7_webapp/weakShop/")]),t._v("\n$ go run gyudon-httpd.go\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 1")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 2")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n")])])]),a("p",[t._v("♻️ 7.3.1. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/7_webapp/weakShop/")]),t._v("\n$ go run gyudon-httpd.go\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 何も出力されない場合、実行中です。続くハンズオンを実施ください")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 1")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NegitamaGyudon'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n\nreal    0m10.036s\nuser    0m0.014s\nsys     0m0.013s\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 2")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NegitamaGyudon'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n\nreal    0m18.991s\nuser    0m0.004s\nsys     0m0.010s\n\n")])])]),a("p",[t._v("これは、2つ目のリクエストが、1つ目のリクエストが終わるまでの待ち時間＋自身の実行時間となるためです。")]),t._v(" "),a("p",[t._v("💻 7.3.1. 後処理")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Ctrl + C で、gyudon-httpd.goをKillください")]),t._v("\n")])])]),a("h3",{attrs:{id:"_7-3-2-並行プログラミング"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-2-並行プログラミング"}},[t._v("#")]),t._v(" 7.3.2. 並行プログラミング")]),t._v(" "),a("p",[t._v("AさんとBさんに、同時に牛丼を食べてもらう方法は、簡単です。"),a("br"),t._v("\n座席を2つ用意すれば良いのです。Cさん、Dさん.....と1000000人来店したら、来店と同時に座席を増やしてしまえば、誰も待たなくて良くなります。"),a("br"),t._v("\nこれによりDさんは、AさんBさんCさんが食べ終わるのを待つことなく、食べ始めることができます。"),a("br"),t._v("\n(現実では難しいでしょうが、不思議なポッケで叶えてもらったと思ってください。)")]),t._v(" "),a("p",[t._v("プログラムでも、複数の処理をおおむね同時に実行する(厳密には、したように見せる。が正しい) 並行プログラミングがあります。"),a("br"),t._v("\n並行プログラミングなコードを自身で作成するためには、領域の管理を考えた数十行のコードを作成する必要があります。"),a("br"),t._v("\n牛丼屋の例で考えると、座席をどう確保すべきか、どういった要素が必要か。客が離れたら座席をどのように撤去するべきか。1つしかない厨房から牛丼をどのような形で提供するか。辺りです。")]),t._v(" "),a("p",[t._v("既に特徴で紹介していますが、Go言語では、Goroutine を用いることで、とても低コストに並行プログラミングを行えます。"),a("br"),t._v("\n🚀 Goroutineだけではなく、本講義では触れないChannelや、GCによって、低コストに並行プログラミングができます。")]),t._v(" "),a("p",[t._v("実際に、食べる処理(Eat関数) を、並行プログラミングにして、2つ目のリクエストが、1つ目のリクエストを待たなくても良いように、アップグレードしましょう")]),t._v(" "),a("h3",{attrs:{id:"_7-3-3-並行動作するwebアプリケーションサーバ体験"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-3-3-並行動作するwebアプリケーションサーバ体験"}},[t._v("#")]),t._v(" 7.3.3. 💻 並行動作するWebアプリケーションサーバ体験")]),t._v(" "),a("p",[a("code",[t._v("/go/src/go_tutorial/7_webapp/weakShop/http/zakohttp.go")]),t._v(" の、"),a("code",[t._v("c.serve(self.ctx)")]),t._v(" が、Eat関数を呼び出しています。"),a("br"),t._v("\nここをGoroutine化し、その先にあるEat関数を新しく誕生させた座席(Goroutine)で動作させるようにしましょう。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/7_webapp/weakShop/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" http/zakohttp.go\n$ go run gyudon-httpd.go\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 何も出力されない場合、実行中です。続くハンズオンを実施ください")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 1")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 2")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n")])])]),a("ul",[a("li",[t._v("/go/src/go_tutorial/7_webapp/weakShop/http/zakohttp.go"),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Line56 もともとの書かれ方")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("serve")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("self"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Line56 変更後。go と、加筆する")]),t._v("\n")])])])])]),t._v(" "),a("p",[t._v("♻️ 7.3.3. 結果")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# WORKPATH /go/src/go_tutorial/7_webapp/weakShop/")]),t._v("\n$ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("お好きなエディタ"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" http/zakohttp.go\n$ go run gyudon-httpd.go\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 何も出力されない場合、実行中です。続くハンズオンを実施ください")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 1")]),t._v("\n$ docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it go-tutor /bin/bash\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NegitamaGyudon'")]),t._v("\n\n\nreal    0m10.033s\nuser    0m0.019s\nsys     0m0.009s\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 2")]),t._v("\n$ docker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it go-tutor /bin/bash\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("time")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://localhost:8080/\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 10秒程度待機する")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NegitamaGyudon'")]),t._v("\n\n\nreal    0m10.012s\nuser    0m0.019s\nsys     0m0.009s\n")])])]),a("p",[t._v("💻 7.3.3. 後処理")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# TERMINAL 0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Ctrl + C で、gyudon-httpd.goをKillください")]),t._v("\n")])])]),a("h5",{attrs:{id:"tips-goroutineは、注意して使いましょう"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tips-goroutineは、注意して使いましょう"}},[t._v("#")]),t._v(" Tips: Goroutineは、注意して使いましょう")]),t._v(" "),a("p",[t._v("お手軽な"),a("code",[t._v("go func(){}()")]),t._v(" ですが、注意が必要です。"),a("br"),t._v("\n並行動作を簡単に行えますが、並行動作に対応した処理やデータの安全性は、プログラマ自身が考え、コード化しておく必要があります。"),a("br"),t._v("\nGoroutineが迷子になったり、データが壊れたり、リソースの奪い合いになったりと、危険なことが多くあります。"),a("br"),t._v("\n本番サービスとして、きちんと提供する場合は、並行プログラミングを学習してから利用することをお勧めします。")]),t._v(" "),a("h3",{attrs:{id:"_7-4-zakohttpパッケージについて"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-4-zakohttpパッケージについて"}},[t._v("#")]),t._v(" 7.4. zakohttpパッケージについて")]),t._v(" "),a("p",[t._v("第7章は、Go言語標準パッケージ "),a("a",{attrs:{href:"https://golang.org/src/net/http",target:"_blank",rel:"noopener noreferrer"}},[t._v("net/http"),a("OutboundLink")],1),t._v(" の以下の処理を参考に作成しています。(執筆時点最新のHEAD)")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/golang/go/blob/cb4cd9e17753b5cd8ee4cd5b1f23d46241b485f1/src/net/http/server.go#L2993",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/golang/go/blob/cb4cd9e17753b5cd8ee4cd5b1f23d46241b485f1/src/net/http/server.go#L2993"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("実は、本講義を通して、Go標準パッケージの劣化版を、Go標準パッケージに近づけるコーディングをしてもらいました。"),a("br"),t._v(" "),a("a",{attrs:{href:"https://golang.org/src/net/http",target:"_blank",rel:"noopener noreferrer"}},[t._v("net/http"),a("OutboundLink")],1),t._v(" パッケージは、通信に関する処理や、同期処理、書き込み処理やハンドラの登録など、Goで触っておくと良さそうな表現が色々と存在します。"),a("br"),t._v("\n腕試しをされるのであれば、zakohttpの問題を考え、アップグレードし続けてみてください。")]),t._v(" "),a("h1",{attrs:{id:"_8-最後に-2-min"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_8-最後に-2-min"}},[t._v("#")]),t._v(" 8. 最後に ( 2 min )")]),t._v(" "),a("p",[t._v("今回は、Goを知ってもらうために、Goの概要説明、実行やコンパイル、関数や構造体、そして、Goroutineをサクッと追っていきました。"),a("br"),t._v("\n今回紹介しきれていない"),a("code",[t._v("interface")]),t._v("や"),a("code",[t._v("channel")]),t._v("、"),a("code",[t._v("context")]),t._v(" 辺りを学習するとよりGo言語が、選択肢としての幅が広がっていくと思います。"),a("br"),t._v("\nもしGo言語をもっと知ってみたいと思っているのであれば、Goが学習できる "),a("a",{attrs:{href:"https://go-tour-jp.appspot.com/list",target:"_blank",rel:"noopener noreferrer"}},[t._v("go tour(日本語)"),a("OutboundLink")],1),t._v(" を、まずは一周してみることをお勧めします。"),a("br"),t._v("\n基本的な構文や、Go言語の構造体の説明、先程あげた"),a("code",[t._v("interface")]),t._v(", "),a("code",[t._v("channel")]),t._v(" の説明があります。(執筆時点、"),a("code",[t._v("context")]),t._v("の説明はありませんでした)")]),t._v(" "),a("p",[t._v("なお、本講義外で、本講義で用いたソースコードを編集/検証することは、自由とします。"),a("br"),t._v("\nいじくり回し、色々学習することも問題ありません。"),a("br"),t._v("\nより素晴らしい例を見つけたら、本リポジトリにPRしていただいても大丈夫です。")]),t._v(" "),a("p",[t._v("また、Go言語の構造から迫るアプローチ以外として、その他外部のコミュニティから情報を得るのも良いでしょう。")]),t._v(" "),a("ul",[a("li",[t._v("Gophers Slackの"),a("code",[t._v("#japan")]),t._v("チャンネル\n"),a("ul",[a("li",[t._v("世界中のGopherが集うSlack、その中の"),a("code",[t._v("#japan")]),t._v("に日本人Gopherが住んでいます")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://vim-jp.org/docs/chat.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("vim-jp slackの#lang-goチャンネル"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[t._v("Vimコミュニティのslackですが、何故かGopher Slackの"),a("code",[t._v("#japan")]),t._v("より活発")]),t._v(" "),a("li",[t._v("普通にEmacs使いの人もいるので、お使いのエディタに依らずどうぞ")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://mattn.kaoriya.net/etc/gde.htm",target:"_blank",rel:"noopener noreferrer"}},[t._v("こういう人"),a("OutboundLink")],1),t._v("がいたりします")])])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://gocon.jp/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go Conference"),a("OutboundLink")],1),t._v(" "),a("ul",[a("li",[t._v("今年はこんな状態なので開催されてませんが、例年は半年毎に開催されるGoコミュニティによるカンファレンス")])])])]),t._v(" "),a("p",[t._v("もちろん、本講義開催の講師陣に質問くださっても問題ありません。"),a("br"),t._v("\n情報源はたくさんあるので、貪欲にGoを知ってみてください。"),a("br"),t._v("\nではみなさん、Let's Go!!")]),t._v(" "),a("credit-footer")],1)}),[],!1,null,null,null);s.default=e.exports}}]);