(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{437:function(e,t,r){"use strict";r.r(t);var a=r(42),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("header-table"),e._v(" "),r("h1",{attrs:{id:"ハンズオン事前準備"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ハンズオン事前準備"}},[e._v("#")]),e._v(" ハンズオン事前準備")]),e._v(" "),r("p",[e._v("各ハンズオンに取り組む前に、各ハンズオン用の環境を "),r("a",{attrs:{href:"https://www.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Docker"),r("OutboundLink")],1),e._v(" で動かせるように準備します。")]),e._v(" "),r("h2",{attrs:{id:"docker-のインストール-check-1"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-のインストール-check-1"}},[e._v("#")]),e._v(" Docker のインストール (Check.1)")]),e._v(" "),r("p",[e._v("各 OS やプラットフォームごとのインストール方法はここにドキュメントがあります。\n"),r("a",{attrs:{href:"https://docs.docker.com/engine/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.docker.com/engine/install/"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("この資料では Windows と macOS について、簡単に取り上げます。")]),e._v(" "),r("h3",{attrs:{id:"windows"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[e._v("#")]),e._v(" Windows")]),e._v(" "),r("p",[e._v("windows の場合 "),r("a",{attrs:{href:"https://docs.docker.com/docker-for-windows/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-for-windows"),r("OutboundLink")],1),e._v(" を使うのがおすすめです。WSL や仮想環境に linux を立てることもできますが、ネットワークのトラブルなどが頻発するため現状あまりお勧めしません。")]),e._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"https://hub.docker.com/editions/community/docker-ce-desktop-windows/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ダウンロードページ"),r("OutboundLink")],1),e._v(" にアクセスし、「Get Docker」をクリックして exe ファイルをダウンロードします。\n"),r("ul",[r("li",[e._v("stable 版で問題ありません")])])]),e._v(" "),r("li",[e._v("ダウンロードした exe ファイルをクリックしてインストールします。")]),e._v(" "),r("li",[e._v("PowerShell やコマンドプロンプトを開き、"),r("code",[e._v("docker version")]),e._v("コマンドが実行できれば成功です。")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("> docker --version\n\nDocker version 19.03.1\n")])])]),r("h3",{attrs:{id:"mac"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#mac"}},[e._v("#")]),e._v(" Mac")]),e._v(" "),r("p",[e._v("Mac の場合は "),r("a",{attrs:{href:"https://docs.docker.com/docker-for-mac/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-for-mac"),r("OutboundLink")],1),e._v(" を使います。")]),e._v(" "),r("ol",[r("li",[r("a",{attrs:{href:"https://hub.docker.com/editions/community/docker-ce-desktop-mac/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ダウンロードページ"),r("OutboundLink")],1),e._v(" にアクセスし、「Get Docker」をクリックして dmg ファイルをダウンロードします。")]),e._v(" "),r("li",[e._v("ダウンロードした dmg ファイルをクリックしてインストールします。")]),e._v(" "),r("li",[e._v("terminal を開き、"),r("code",[e._v("docker version")]),e._v("コマンドが実行できれば成功です。")])]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ docker --version\nDocker version 19.03, build c97c6d6\n")])])]),r("h2",{attrs:{id:"hello-docker"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#hello-docker"}},[e._v("#")]),e._v(" Hello Docker")]),e._v(" "),r("h3",{attrs:{id:"hello-world-コンテナを動かす-check-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#hello-world-コンテナを動かす-check-2"}},[e._v("#")]),e._v(" hello-world コンテナを動かす (Check.2)")]),e._v(" "),r("p",[e._v("hello-world コンテナをダウンロードして、実際に docker で動かしてみます。")]),e._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[e._v("$ docker run hello-world\n\nUnable to "),r("span",{pre:!0,attrs:{class:"token function"}},[e._v("find")]),e._v(" image "),r("span",{pre:!0,attrs:{class:"token string"}},[e._v("'hello-world:latest'")]),e._v(" locally\nlatest: Pulling from library/hello-world\nca4f61b1923c: Pull complete\nDigest: sha256:ca0eeb6fb05351dfc8759c20733c91def84cb8007aa89a5bf606bc8b315b9fc7\nStatus: Downloaded newer image "),r("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("for")]),e._v(" hello-world:latest\n\nHello from Docker"),r("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("\nThis message shows that your installation appears to be working correctly.\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n")])])]),r("p",[r("code",[e._v("Hello from Docker!")]),e._v("が表示されていれば成功です。")]),e._v(" "),r("h3",{attrs:{id:"失敗した場合"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#失敗した場合"}},[e._v("#")]),e._v(" 失敗した場合")]),e._v(" "),r("p",[e._v("以下のようなエラーで失敗した場合 proxy の設定が必要な場合があります。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Unable to find image 'hello-world:latest' locally\ndocker: Error response from daemon: Get https://registry-1.docker.io/v2/: net/http: request canceled while waiting for connection (Client.Timeout exceeded while awaiting headers).\nSee 'docker run --help'.\n")])])]),r("p",[e._v("「docker {OS 名} proxy」などで検索すると、以下のような記事が検索されると思うので、参考にしながら設定してみてください。")]),e._v(" "),r("ul",[r("li",[e._v("Windows: "),r("a",{attrs:{href:"https://qiita.com/wryun0suke/items/1f4bbd2977ae41ee7a36",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://qiita.com/wryun0suke/items/1f4bbd2977ae41ee7a36"),r("OutboundLink")],1)]),e._v(" "),r("li",[e._v("Mac: "),r("a",{attrs:{href:"https://qiita.com/kobakou/items/214129924b9cd3e64d0f",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://qiita.com/kobakou/items/214129924b9cd3e64d0f"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("proxy の URL は環境によって異なるため、周りの誰かに確認してください。")]),e._v(" "),r("h3",{attrs:{id:"それでもダメな場合-or-違うエラーの場合"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#それでもダメな場合-or-違うエラーの場合"}},[e._v("#")]),e._v(" それでもダメな場合 or 違うエラーの場合")]),e._v(" "),r("p",[e._v("TA や講師など、周りの先輩に遠慮なく声をかけてください。")]),e._v(" "),r("h2",{attrs:{id:"nginx-を立てて手元で-html-を書き換える"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#nginx-を立てて手元で-html-を書き換える"}},[e._v("#")]),e._v(" Nginx を立てて手元で HTML を書き換える")]),e._v(" "),r("p",[e._v("次は docker の "),r("a",{attrs:{href:"https://docs.docker.com/storage/volumes/",target:"_blank",rel:"noopener noreferrer"}},[e._v("volume"),r("OutboundLink")],1),e._v(" という機能を使い、コンテナの中のファイルを手元で編集できるようにしてみます。\nこれができると docker 環境で動かすファイルを手元のエディタで編集できるためとても便利です。")]),e._v(" "),r("p",[e._v("ここでは Nginx という web サーバーを使い、簡単な HTML ファイルをホスティングしてみます。そしてその HTML ファイルを手元で書き換えてみましょう。")]),e._v(" "),r("h3",{attrs:{id:"html-ファイルの作成"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#html-ファイルの作成"}},[e._v("#")]),e._v(" HTML ファイルの作成")]),e._v(" "),r("p",[e._v("以下のようにディレクトリを作成し、その中に html ファイルを作成してください。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("mkdir content\nvim content/index.html // メモ帳などでも可。 vimから抜けるには ESCキーを押した後「:wq<Enter>」を入力してください。\n")])])]),r("p",[r("code",[e._v("index.html")]),e._v("の内容はなんでもいいですが、例えば以下のようにしてみましょう。")]),e._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[e._v("Hello Bootcamp!\n")])])]),r("h3",{attrs:{id:"docker-コンテナの起動-check-3"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-コンテナの起動-check-3"}},[e._v("#")]),e._v(" docker コンテナの起動 (Check.3)")]),e._v(" "),r("p",[e._v("HTML ファイルが作成できたら、nginx の docker コンテナを以下のように起動します。")]),e._v(" "),r("p",[e._v("windows")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ docker run --name test-nginx -p 8080:80 --mount type=bind,source=%CD%/content,target=/usr/share/nginx/html,ro -d nginx\n47fb496ed83cb26558874e8fd6b6fff4303031a2b24f827a938310ee9646c638\n")])])]),r("p",[e._v("mac/linux")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ docker run --name test-nginx -p 8080:80 --mount type=bind,source=$PWD/content,target=/usr/share/nginx/html,ro -d nginx\n47fb496ed83cb26558874e8fd6b6fff4303031a2b24f827a938310ee9646c638\n")])])]),r("p",[e._v("エラーなく起動できたらブラウザを開き、"),r("a",{attrs:{href:"http://localhost:8080",target:"_blank",rel:"noopener noreferrer"}},[e._v("localhost:8080"),r("OutboundLink")],1),e._v(" （"),r("code",[e._v("localhost")]),e._v("または ssh 先の IP アドレス）にアクセスしてみましょう。「Hello Bootcamp!」が表示されていれば成功です。")]),e._v(" "),r("h3",{attrs:{id:"html-ファイルを書き換える"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#html-ファイルを書き換える"}},[e._v("#")]),e._v(" HTML ファイルを書き換える")]),e._v(" "),r("p",[e._v("先ほど作成した"),r("code",[e._v("index.html")]),e._v("を編集してみましょう。")]),e._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[e._v("Hello Bootcamp!!!!!!\n")])])]),r("p",[e._v("保存してブラウザをリロードしてみてください。ページが更新されていれば成功です。")]),e._v(" "),r("h2",{attrs:{id:"docker-コンテナのお掃除"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#docker-コンテナのお掃除"}},[e._v("#")]),e._v(" Docker コンテナのお掃除")]),e._v(" "),r("p",[e._v("最後に Docker コンテナを止めて掃除しておきます。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("docker stop test-nginx\ndocker rm test-nginx\n")])])]),r("p",[e._v("以上で事前準備は完了です。お疲れ様でした。")])],1)}),[],!1,null,null,null);t.default=o.exports}}]);