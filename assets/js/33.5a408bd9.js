(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{481:function(e,s,a){"use strict";a.r(s);var t=a(45),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"_2-ansibleの実行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ansibleの実行"}},[e._v("#")]),e._v(" 2. Ansibleの実行")]),e._v(" "),a("p",[e._v("Ansibleを利用する為にはいくつかのファイルを書く必要がありますが\nまずは実際にAnsibleを実行してイメージを掴んでみましょう。")]),e._v(" "),a("h3",{attrs:{id:"サンプルの実行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#サンプルの実行"}},[e._v("#")]),e._v(" サンプルの実行")]),e._v(" "),a("p",[e._v("ダウンロードした"),a("a",{attrs:{href:"https://github.com/iij/ansible-exercise",target:"_blank",rel:"noopener noreferrer"}},[e._v("教材"),a("OutboundLink")],1),e._v("のフォルダ内で下記コマンドを実行しコンテナ内に入る、\nまたはVScodeの"),a("code",[e._v("Remote - Containers")]),e._v("を使い教材のフォルダを開き、コンテナ内に入ります。")]),e._v(" "),a("p",[e._v("Windows")]),e._v(" "),a("div",{staticClass:"language-powershell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-powershell"}},[a("code",[e._v("docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("compose "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("f docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("compose\\docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("compose"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("yml "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("start")]),e._v("\ndocker exec "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("it docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("-")]),e._v("compose_ansible_1 bash\n")])])]),a("p",[e._v("Mac/Linux")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("docker-compose -f docker-compose/docker-compose.yml up -d\ndocker "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v("exec")]),e._v(" -it docker-compose_ansible_1 "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("bash")]),e._v("\n")])])]),a("p",[e._v("続いて"),a("a",{attrs:{href:"https://docs.ansible.com/ansible/latest/cli/ansible.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ansibleコマンド"),a("OutboundLink")],1),e._v("を使って\nアドホックにansibleを実行します。")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("ansible -m "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("ping")]),e._v(" db1\n")])])]),a("div",{staticClass:"language-txt extra-class"},[a("pre",{pre:!0,attrs:{class:"language-txt"}},[a("code",[e._v('db1 | SUCCESS => {\n    "ansible_facts": {\n        "discovered_interpreter_python": "/usr/bin/python"\n    },\n    "changed": false,\n    "ping": "pong"\n}\n')])])]),a("p",[e._v("Ansibleは基本的に実行すべき内容（task)を記載したplaybookを作成し、"),a("code",[e._v("ansible-playbook")]),e._v("コマンドを用いて実行するものですが、上記の通りplaybookを作成しなくとも実行できるコマンドもあるため、細かな日々の運用作業や確認作業などに使えます。")]),e._v(" "),a("p",[e._v("なお、"),a("a",{attrs:{href:"https://docs.ansible.com/ansible/latest/cli/ansible-playbook.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ansible-playbookコマンド"),a("OutboundLink")],1),e._v("は"),a("code",[e._v("playbook")]),e._v("と呼ばれるYAMLファイルにしたがってAnsibleを実行するコマンドになります。\n今回はAnsibleの実行イメージと出力のイメージを掴んで頂くためにアドホックで実行しましたが以後、このハンズオンでは主に"),a("code",[e._v("ansible-playbook")]),e._v("コマンドを使っていきます。")])])}),[],!1,null,null,null);s.default=n.exports}}]);