<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>サーバアプリケーション界隈Overview | IIJ Bootcamp</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="IIJ で実施している新人向けのハンズオン資料集です。">
    
    <link rel="preload" href="/bootcamp/assets/css/0.styles.5f3404af.css" as="style"><link rel="preload" href="/bootcamp/assets/js/app.8b92d44a.js" as="script"><link rel="preload" href="/bootcamp/assets/js/2.ab7295c2.js" as="script"><link rel="preload" href="/bootcamp/assets/js/8.d311a4eb.js" as="script"><link rel="preload" href="/bootcamp/assets/js/9.52643bf1.js" as="script"><link rel="prefetch" href="/bootcamp/assets/js/10.11d77cf4.js"><link rel="prefetch" href="/bootcamp/assets/js/11.30aee141.js"><link rel="prefetch" href="/bootcamp/assets/js/12.b146976a.js"><link rel="prefetch" href="/bootcamp/assets/js/13.ec6e8de9.js"><link rel="prefetch" href="/bootcamp/assets/js/14.27c043d6.js"><link rel="prefetch" href="/bootcamp/assets/js/15.08ae0d04.js"><link rel="prefetch" href="/bootcamp/assets/js/16.3ab61188.js"><link rel="prefetch" href="/bootcamp/assets/js/17.a2e92259.js"><link rel="prefetch" href="/bootcamp/assets/js/18.18eb1ba5.js"><link rel="prefetch" href="/bootcamp/assets/js/19.84dae104.js"><link rel="prefetch" href="/bootcamp/assets/js/20.a1e4b7cf.js"><link rel="prefetch" href="/bootcamp/assets/js/21.6eb4ae93.js"><link rel="prefetch" href="/bootcamp/assets/js/22.e472f3bd.js"><link rel="prefetch" href="/bootcamp/assets/js/23.fd8ddf12.js"><link rel="prefetch" href="/bootcamp/assets/js/24.df11580f.js"><link rel="prefetch" href="/bootcamp/assets/js/25.9ea188c1.js"><link rel="prefetch" href="/bootcamp/assets/js/26.cc7f3107.js"><link rel="prefetch" href="/bootcamp/assets/js/27.2f25e06e.js"><link rel="prefetch" href="/bootcamp/assets/js/28.dd2b80c3.js"><link rel="prefetch" href="/bootcamp/assets/js/29.cc62ea2b.js"><link rel="prefetch" href="/bootcamp/assets/js/3.11dc8f8d.js"><link rel="prefetch" href="/bootcamp/assets/js/30.318aabbc.js"><link rel="prefetch" href="/bootcamp/assets/js/31.b1ce5d20.js"><link rel="prefetch" href="/bootcamp/assets/js/32.64b78e07.js"><link rel="prefetch" href="/bootcamp/assets/js/33.4b7700e5.js"><link rel="prefetch" href="/bootcamp/assets/js/34.fb6a2369.js"><link rel="prefetch" href="/bootcamp/assets/js/35.eab60b53.js"><link rel="prefetch" href="/bootcamp/assets/js/36.8d0911c7.js"><link rel="prefetch" href="/bootcamp/assets/js/37.4f994cae.js"><link rel="prefetch" href="/bootcamp/assets/js/38.6f009449.js"><link rel="prefetch" href="/bootcamp/assets/js/39.472b25de.js"><link rel="prefetch" href="/bootcamp/assets/js/4.1c253e79.js"><link rel="prefetch" href="/bootcamp/assets/js/40.de54d1e8.js"><link rel="prefetch" href="/bootcamp/assets/js/5.6c926e01.js"><link rel="prefetch" href="/bootcamp/assets/js/6.41a539d2.js"><link rel="prefetch" href="/bootcamp/assets/js/7.50709bad.js">
    <link rel="stylesheet" href="/bootcamp/assets/css/0.styles.5f3404af.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bootcamp/" class="home-link router-link-active"><!----> <span class="site-name">IIJ Bootcamp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/iij/bootcamp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>サーバアプリケーション界隈Overview</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bootcamp/server-app/overview/#目次" class="sidebar-link">目次</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bootcamp/server-app/overview/#開発言語・スタイルの変遷" class="sidebar-link">開発言語・スタイルの変遷</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#cgi" class="sidebar-link">CGI</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#php" class="sidebar-link">PHP</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#java-servlet-サーブレット" class="sidebar-link">Java Servlet (サーブレット)</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#java-ee-spring" class="sidebar-link">Java EE / Spring</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#ruby-on-rails" class="sidebar-link">Ruby on Rails</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#ajaxの出現-フロントエンド-apiサーバの時代" class="sidebar-link">Ajaxの出現 / フロントエンド+APIサーバの時代</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#node-js" class="sidebar-link">Node.js</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#go" class="sidebar-link">Go</a></li></ul></li><li><a href="/bootcamp/server-app/overview/#アプリケーションとインフラ" class="sidebar-link">アプリケーションとインフラ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#オンプレミス" class="sidebar-link">オンプレミス</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#クラウド" class="sidebar-link">クラウド</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#saas-iaas-paas-caas-faas" class="sidebar-link">SaaS/IaaS/PaaS/CaaS/FaaS</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#aws" class="sidebar-link">AWS</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#gcp" class="sidebar-link">GCP</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#azure" class="sidebar-link">Azure</a></li><li class="sidebar-sub-header"><a href="/bootcamp/server-app/overview/#その他" class="sidebar-link">その他</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="サーバアプリケーション界隈overview"><a href="#サーバアプリケーション界隈overview" class="header-anchor">#</a> サーバアプリケーション界隈Overview</h1> <p>ここでいうサーバアプリケーションとは、Webアプリケーションを構成する要素の中のサーバサイドの実装技術のことをなんとなく表現しています。</p> <h2 id="目次"><a href="#目次" class="header-anchor">#</a> 目次</h2> <ol><li>開発言語・スタイルの変遷
<ol><li>CGI</li> <li>PHP</li> <li>サーブレット</li> <li>Java EE / Spring</li> <li>Ruby on Rails</li> <li>Ajaxの出現 / フロントエンド+APIサーバの時代</li> <li>Node.js</li> <li>Go</li></ol></li> <li>アプリケーションとインフラ
<ol><li>オンプレミス</li> <li>Docker, Kubernetes</li> <li>AWS, GCP</li></ol></li></ol> <h2 id="開発言語・スタイルの変遷"><a href="#開発言語・スタイルの変遷" class="header-anchor">#</a> 開発言語・スタイルの変遷</h2> <h3 id="cgi"><a href="#cgi" class="header-anchor">#</a> CGI</h3> <p>（1993年 フォーマルな<a href="https://www.w3.org/CGI/" target="_blank" rel="noopener noreferrer">仕様<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>制定は1997年）</p> <div class="language-perl extra-class"><pre class="language-perl"><code><span class="token comment">#!/usr/bin/perl</span>

<span class="token keyword">print</span> <span class="token string">&quot;Content-type: text/html \n\n&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string">&quot;&lt;head&gt;&lt;title&gt;IIJ Bootcamp&lt;/title&gt;&lt;/head&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string">&quot;&lt;p&gt;Welcome to IIJ Bootcamp&lt;/p&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">print</span> <span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>Common Gateway Interface の略</li> <li>The Apache HTTP Server (&quot;httpd&quot;) などのWebサーバでHTTPリクエストを受けて、外部プログラムにHTTPリクエストを渡し、出力をHTTPレスポンスとして返すしくみ。</li> <li>Perlが大流行するきっかけとなった。
<ul><li>Perlは文字列処理が強力（C言語は文字列処理が貧弱）</li> <li>PerlからMySQL/PostgreSQLに接続してHTTPレスポンスを生成するスタイル</li></ul></li> <li>今日でもPerlで実装されたプロダクトは存続している（MovableTypeとか、mixiとか。CookPadもPerlでスタートしたはず)。</li> <li>CGIの仕組み自体はPerl以外でもRubyやPython、シェルスクリプトなど文字列を出力できるプログラムであれば利用できる</li></ul> <h3 id="php"><a href="#php" class="header-anchor">#</a> PHP</h3> <div class="language-php extra-class"><pre class="language-php"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>IIJ Bootcamp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
 <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token string single-quoted-string">'&lt;p&gt;Welcom to IIJ Bootcamp&lt;/p&gt;'</span><span class="token punctuation">;</span> <span class="token delimiter important">?&gt;</span></span> 
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>（開発開始は1994年 実質的に最初の公開版PHP 3が1997年 本格普及はPHP 4で2000年)</p> <ol><li>CGIはHTTPリクエストを受けるごとに、新しいプロセスをforkする必要があり、Webサーバにとって負荷が高かった。</li> <li>WebサーバのモジュールとしてPerlを動作させる方法が考案された（apache httpd + mod_perl 1998年)。
<ol><li>しかしPerlはWebサーバのモジュールとして動作させる前提で設計/実装されたものではなく、やや使い勝手が悪かった。</li> <li>類似の技術としてFastCGIというものもあり、これは常駐プロセスとしてCGI実行エンジンを用意しておくことで、リクエストごとにプロセスをforkする必要を無くしたものだったが、やはり癖があった。</li></ol></li> <li>最初からWebサーバのモジュールとして実行することを念頭に置いた、Webプログラミングに特化した処理系としてPHPが登場、大流行してPerlを駆逐する。
<ol><li>Facebookも長い間PHPで書かれていた。</li></ol></li></ol> <h4 id="perl-cgi"><a href="#perl-cgi" class="header-anchor">#</a> Perl CGI</h4> <p><img src="/bootcamp/assets/img/perl_cgi.drawio.c9857297.png" alt="perl_cgi" title="perl_cgi"></p> <h4 id="mod-perl"><a href="#mod-perl" class="header-anchor">#</a> mod_perl</h4> <p><img src="/bootcamp/assets/img/mod_perl.drawio.80a12876.png" alt="mod_perl" title="mod_perl"></p> <h3 id="java-servlet-サーブレット"><a href="#java-servlet-サーブレット" class="header-anchor">#</a> Java Servlet (サーブレット)</h3> <p>（1996年に初期バージョンが公開 1998年に最初の公式API仕様が確立 2001年にStrutsが登場)</p> <p>Java Servletの例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">bootcamp</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">{</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> doGet <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> res<span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">PrintWriter</span> pw <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    res<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;text/html; charset=Shift_JIS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;head&gt;&lt;title&gt;IIJ Bootcamp&lt;/title&gt;&lt;/head&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;Welcome to IIJ Bootcamp&lt;/p&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/body&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    pw<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;/html&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>JavaのテンプレートエンジンであるJSP(JavaServer Pages)の例</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span><span class="token operator">%</span>@ page contentType<span class="token operator">=</span><span class="token string">&quot;text/html&quot;</span> <span class="token operator">%</span><span class="token operator">&gt;</span>

<span class="token generics"><span class="token punctuation">&lt;</span>html<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span>IIJ <span class="token class-name">Bootcamp</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
<span class="token generics"><span class="token punctuation">&lt;</span>p<span class="token punctuation">&gt;</span></span>
<span class="token operator">&lt;</span><span class="token operator">%</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Welcom to IIJ Bootcamp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>

現在時刻<span class="token operator">:</span> <span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span>Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><ol><li>1995年Sun Microsystems社がJava言語を売り出した。
<ul><li>最初にアピールした<code>Applet</code>は、Webページの中にJavaのサンドボックス環境を埋め込んでアプリケーションを実行するというものだった。しかし制約が大きいうえにマシンパワーを要求するので、実用的なアプリケーションを作る環境としては、流行らなかった。</li></ul></li> <li>しかしサーバサイドの技術として発表されたサーブレットは2000年ごろから流行し始め、2001年にStrutsが登場するとその人気は決定的になった。
<ol><li>サーブレットはHTTPリクエストを（CGIのようにプロセスをforkするのではなく)スレッドで処理するので性能が高かった。</li> <li>Javaは静的に型付けされた言語であるため、Javaで書かれたアプリケーションはPHPよりも品質を確保しやすいかった。</li> <li>WebアプリケーションフレームワークであるStrutsを使うと、プログラムを一定のスタイルで記述することを助け、同時に大人数で分業することを助けた。規模の大きなエンタープライズシステムの実装が可能になった。</li> <li>Javaで書かれたコードはポータビリティがあり、サーバのOSやCPUが変わっても、そのまま実行できた。（まだx86系のCPUが市場を独占しておらず、SPARCやAlphaなどのCPUもある程度のシェアを持っていた。)</li></ol></li> <li>かくしてカジュアルな（コンシューマ向けの）WebアプリケーションはPHPで、シリアスな（エンタープライズ向けの）WebアプリケーションはJavaサーブレットで書く、という時代が続くことになった。</li></ol> <h3 id="java-ee-spring"><a href="#java-ee-spring" class="header-anchor">#</a> Java EE / Spring</h3> <p>（Java EE 1999年 / Spring 2002年）</p> <p>※ サンプルは適当です</p> <p>JavaEE</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@ManagedBean</span><span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">&quot;HelloBootcamp&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestScoped</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloBootcamp</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token class-name">String</span> message<span class="token punctuation">;</span>

   <span class="token comment">/** Creates a new instance of HelloBootcamp */</span>
   <span class="token keyword">public</span> <span class="token class-name">HelloBootcamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">&quot;Welcom to IIJ Bootcamp&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token operator">*</span><span class="token annotation punctuation">@EJB</span>
   <span class="token keyword">private</span> <span class="token class-name">MessageFacade</span> messageFacade<span class="token punctuation">;</span><span class="token operator">*</span>

   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Spring Framework</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>

   <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
   <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">&quot;Welcom to IIJ Bootcamp&quot;</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><ol><li>Sun Microsystemはサーブレットの成功に気を良くして、これを一層強力に推進してエンタープライズの世界を支配しようと試みた。そうして出てきたのはJava EE（Enterprise Edition）であった。</li> <li>Java EEは、エンタープライズアプリケーションを多数のサーバの連携する分散処理を通じて実現することを構想し、その中核技術としてEJB（Enterprise JavaBeans）を据えた。EJBを使うと、ネットワーク越しにJavaのオブジェクトが通信し合い、データベースへの永続化も含めてエレガントに処理できるはずだった。Sun Microsystemsの制定したJava EE仕様を実装するアプリケーションサーバ製品が複数のベンダーから出荷され、活況を呈した。</li> <li>だが、実際のJava EEアプリケーションサーバ製品は不安定で性能も悪く、プログラミングも難しいものであった。人々はJava EEを信じて使い続けていたが、疑問も大きく膨らんでいった。</li> <li>そこに登場したのがSpring Frameworkだった（2002年頃）。
<ul><li>作者のRod JohnsonがExpertt One-on-One J2EE Design and Developmentとともに世に問うたもの。</li> <li>Java EE（J2EE) の欠点を指摘し、EJB、とりわけ<code>Entity Beans</code>を使うことは断念し、POJO（Plain Old Java Object) をベースに開発することを提唱した。</li> <li>DI （Dependency Injecttion) のアイデアを普及させ、大規模なJavaアプリケーションを効率よく分業体制で実装する道を切り開いた。</li></ul></li> <li>Spring Frameworkは一世を風靡しただけでなく、今日まで人気を失うことなく、利用されている。
<ul><li>StrutsはStrus1の後継バージョンであるStruts2が、Struts1とまったく互換性がなかったため、Struts1を採用していた開発会社に受け入れられなかった。</li> <li>その後脆弱性問題を連発したため、今日ではまったく人気がない。</li></ul></li></ol> <h3 id="ruby-on-rails"><a href="#ruby-on-rails" class="header-anchor">#</a> Ruby on Rails</h3> <div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token operator">&lt;</span> <span class="token constant">ApplicationController</span>

   <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">hello</span></span>
      render <span class="token symbol">:html</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token string">'&lt;p&gt;Welcom to IIJ Bootcamp&lt;/p&gt;'</span>
   <span class="token keyword">end</span>
<span class="token keyword">end</span>
</code></pre></div><ol><li>2004年、37signals社がbasecampというプロジェクト管理アプリケーションの実装に使用していたRuby on RailsというWebアプリケーションフレームワークを発表した。Railsは非常にインパクトのあるフレームワークで、以降のサーバサイドプログラミングの世界を一変させてしまった。</li> <li>その特徴を列挙すると以下のとおり。
<ol><li>2つの哲学。「同じことを繰り返さない DRY: Don't repeat yourself」「設定より規約 Convention over Configuration」
<ul><li>Strutsでは互いに関連し合う複雑な設定ファイルが多く必要だった
<ul><li>ルーティング（あるURLをどのアクションクラスで処理するかのマッピング）やアクションが処理するリクエストのフォームを記述するクラス、テンプレートの中で使用するタグライブラリの定義など</li> <li>ほとんどの設定項目は、自動的なものであり、設定ファイルのメンテナンスは大量の単純作業であった。</li></ul></li> <li>そこで多くの現場ではExcelなどで主要設定項目を管理し、そのExcelファイルからマクロで個々の設定ファイルを生成するようなことが行われていた。</li> <li>Railsでは、これを「デフォルトで定められているディレクトリ構造や命名規則に沿っている限り、設定ファイルは不要とする（特別な場合だけ、設定ファイルを書く）」という方法で解決した。</li> <li>たとえばRDBMSのpersonsテーブルに対応するモデルクラスを、ModelsディレクトリにあるPerson.rbファイルとして記述すれば、自動的にDBアクセス可能とするというような具合である。</li> <li>こうした開発者体験(Developer Experience)の良さは、Rubyが非常にメタプログラミングをしやすい言語であることで成り立っている。
<ul><li>Rails 独自の拡張や構文を多数実装することで、上記の哲学を実現している。</li></ul></li></ul></li> <li>コマンドラインユーティリティによる開発のサポート
<ul><li>たとえばあるURLに対応するコントローラクラスのスケルトンをコマンドラインユーティリティから生成できる。</li> <li>このようなユーティリティを提供することで、開発者を単純作業から解放し、価値あるコードを書くことへ集中できるようにした。</li></ul></li> <li>Ruby on Railsに触発されて、別の言語でも同様のフレームワークが多数開発された。
<ul><li>PHP: CakePHP</li> <li>Java: JBoss Seam, Java EE 6, Grails（Groovyを使う)</li> <li>Python: Django</li></ul></li></ol></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>rails generate controller User name:string email:string
</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token operator">&lt;</span> <span class="token constant">ActiveRecord</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token constant">Base</span>
   attr_accessible <span class="token symbol">:email</span><span class="token punctuation">,</span> <span class="token symbol">:name</span>
<span class="token keyword">end</span>
</code></pre></div><div class="language-ruby extra-class"><pre class="language-ruby"><code>person <span class="token operator">=</span> <span class="token constant">Person</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment"># id=1なデータをDBで検索する</span>

<span class="token constant">Person</span><span class="token punctuation">.</span>create<span class="token punctuation">(</span>email<span class="token punctuation">:</span> <span class="token string">'hoge@example.com'</span><span class="token punctuation">,</span> username<span class="token punctuation">:</span> <span class="token string">'hoge'</span><span class="token punctuation">)</span> <span class="token comment"># データの作成（DBにinsert）</span>
</code></pre></div><h3 id="ajaxの出現-フロントエンド-apiサーバの時代"><a href="#ajaxの出現-フロントエンド-apiサーバの時代" class="header-anchor">#</a> Ajaxの出現 / フロントエンド+APIサーバの時代</h3> <ol><li>Google MapsおよびGmailの出現により、「画面遷移を伴わないWebアプリケーション」というものがユーザーに認知され始めた。2005年ごろのことである。</li> <li>Googleのエンジニアたちの使った技法は、技術としてはそれ以前から存在していたが誰も注目してこなかったXMLHttpRequestというJavaScriptの機能を初めて本格的に使用するものだった。
<ol><li>この技法をAsynchronous JavaScript + XMLの頭文字をとってAjax （エイジャックス) と呼ぶようになった。</li></ol></li> <li>StrutsやRuby on Railsはサーバサイド（バックエンド）側でリクエストを処理して画面も生成するというようなスタイルが中心だった。しかしAjaxが人気を集めるようになるとクライアント（フロントエンド）側で画面描画をすべて行い、バックエンドにはAPIサーバのみを置くというスタイルが人気を集めるようになった。
<ol><li>画面遷移を伴わないWebアプリケーションのことをSPA （Single Page Application) などと呼ぶ。</li> <li>このスタイルが定着すると、デスクトップアプリケーションと比較しても遜色ないUIのWebアプリケーションが当たり前のように期待されるようになっていった。</li> <li>要求の高度化に応えるため、フロントエンド側のフレームワークが非常に速いペースで開発されているのが今日の状況である。今日、人気のあるフロントエンド・フレームワークとしてReact （Facebook)、Angular （Google)、Vue.js （Evan You)などがある。</li></ol></li></ol> <h3 id="node-js"><a href="#node-js" class="header-anchor">#</a> Node.js</h3> <p>Perlから始まり、ここまで出てきたJavaやRailsは基本的に同期的なI/Oとシングルプロセスで動作する。
そのため複数のリクエストを同時に処理するためにはマルチプロセスやスレッドといった仕組みを利用する必要があった。</p> <ul><li>マルチプロセス: リクエストごと、あるいは事前にプロセスを複数立ち上げておき、1つのリクエストを1プロセスに割り当てる
<ul><li>CGI, FastCGI, Railsのpassengerなど。Apache自体も長らくこの仕組みだった</li></ul></li> <li>スレッド: 言語内で並列処理用の軽量なプロセスを立ち上げる。負荷は低いが言語ごとに癖がある
<ul><li>Javaなど</li></ul></li> <li>上の二つは組み合わせて利用する場合もある</li></ul> <p><img src="/bootcamp/assets/img/apache_rails.drawio.7dadfe95.png" alt="apache_railes" title="apache_railes"></p> <p>しかしインターネット利用者に増加にともなってWebサービスへのアクセス量も増え、プロセスのforkやスレッドによる処理モデルの限界が表面化してきた。特にプロセスの場合は1サーバあたりで起動できるプロセス数には限界がある他、プロセスを作るコスト（メモリ消費など）が無視できなくなってきたのである。
(C10K問題と呼ばれる)</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>たとえば32bit環境のlinuxサーバでは、プロセスの作成上限は管理番号(PID)の上限となる32768になる。
また１スレッドあたり数MBのメモリを使うとすると、8GBのメモリを積んだサーバでは4000ほどが上限になる。
（あくまで単純に計算した場合の理論値）</p></div> <p>この問題への解決として、Node.jsをはじめとした非同期I/OとEventDrivenなアーキテクチャが注目された。
Node.jsはJavaScriptの実行環境の一つで、I/O待ち（HDDへの書き込みなど）中に他の処理を行うことで、1プロセスで複数のリクエストを同時に処理することができる。</p> <p><img src="/bootcamp/assets/img/node.drawio.0548a511.png" alt="node" title="node"></p> <p>開発スタイルの特徴としては以下が挙げられる。</p> <ul><li>フロントエンド開発と同じJavaScriptで書けるので、1サービスを作るのに複数の言語を扱わなくてよくなる</li> <li>豊富なライブラリやツールの選択肢がある</li> <li>反面EventDrivenな実装はコードが複雑になりがちで、どちらかというと小規模な実装向け
<ul><li>TypeScriptによる型の導入やasync/await記法の導入などで改善されつつはある</li></ul></li> <li>できるだけ自分で実装せずにライブラリを使うことがよしとされる風潮があり、ライブラリの依存関係が膨らみがち
<ul><li>正しくはあるが、小さな機能のために追加ライブラリをパッケージする必要があり、依存関係の複雑さやビルド時間の増加を招く</li> <li>rubyの頃からある業界的な課題ではあるが、Node.jsでは特に顕著</li></ul></li></ul> <p>最近ではSPAフレームワークからの流れでSSR(Server Side Rendering)を採用するサービスも増えており、その実行環境としてNode.jsが引き続き使われている。</p> <h3 id="go"><a href="#go" class="header-anchor">#</a> Go</h3> <p>2016年くらいから利用例の増えてきたプログラミング言語で、静的型付け・シンプルな言語体系・高速な動作・並行処理が得意などの特徴がある。
RubyやPythonなどのスクリプト言語のような開発スピードと、JavaやCのような静的型付けによる安全性・実行の速さを両立していることで、Webサービスのバックエンドとして使われることが増えた。
RubyやPython、Javaなどのように実行環境をインストールする必要がなく、コンパイルしたバイナリファイル1つで動作するため、デプロイや環境構築が容易なのも特徴。
またGoにはgoroutineという軽量なスレッドのような並行処理の仕組みがあり、このgoroutineを使って複数のリクエストを処理することができる。</p> <p><img src="/bootcamp/assets/img/go.drawio.c70b0a4e.png" alt="go" title="go"></p> <p>開発スタイルとしては以下のような特徴がある。</p> <ul><li>あまりライブラリやフレームワークを使わずに、自分で実装することが推奨される
<ul><li>標準ライブラリが優秀で、大抵の機能はフレームワークがなくても十分実装できる</li> <li>抽象化関連の機能も少ないためフレームワークの旨味があまりなく、デファクトが生まれづらい</li></ul></li> <li>goroutineという仕組みでシンプルに並行処理が書ける</li> <li>言語仕様がシンプルなのと静的型付けなこともあり、linterやコード補完ツールが作りやすい
<ul><li>言語解析をしてくれる<code>analysis package</code>が公式から提供されている</li></ul></li> <li>コーディング規約がある程度公式で決まっており、誰が書いても同じ書き方になる
<ul><li>複数人での開発がやりやすい</li></ul></li> <li>コンパイル言語なので（スクリプト言語に比べると）デバッグが難しい</li> <li>Railsのようなフレームワークに頼らず、自力でアプリケーションを構築していく必要がある</li></ul> <h2 id="アプリケーションとインフラ"><a href="#アプリケーションとインフラ" class="header-anchor">#</a> アプリケーションとインフラ</h2> <h3 id="オンプレミス"><a href="#オンプレミス" class="header-anchor">#</a> オンプレミス</h3> <h3 id="クラウド"><a href="#クラウド" class="header-anchor">#</a> クラウド</h3> <h3 id="saas-iaas-paas-caas-faas"><a href="#saas-iaas-paas-caas-faas" class="header-anchor">#</a> SaaS/IaaS/PaaS/CaaS/FaaS</h3> <h3 id="aws"><a href="#aws" class="header-anchor">#</a> AWS</h3> <h3 id="gcp"><a href="#gcp" class="header-anchor">#</a> GCP</h3> <h3 id="azure"><a href="#azure" class="header-anchor">#</a> Azure</h3> <h3 id="その他"><a href="#その他" class="header-anchor">#</a> その他</h3> <div><hr> <span>CC BY-SA Licensed | Copyright, Internet Initiative Japan Inc.</span></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/iij/bootcamp/edit/master/src/server-app/overview/README.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/11/2021, 5:23:31 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/bootcamp/assets/js/app.8b92d44a.js" defer></script><script src="/bootcamp/assets/js/2.ab7295c2.js" defer></script><script src="/bootcamp/assets/js/8.d311a4eb.js" defer></script><script src="/bootcamp/assets/js/9.52643bf1.js" defer></script>
  </body>
</html>
